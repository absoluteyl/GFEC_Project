  [1m[36m (12.8ms)[0m  [1mCREATE TABLE "merchandises" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" text, "price" integer, "amount" integer, "created_at" datetime, "updated_at" datetime, "user_id" integer) [0m
  [1m[35m (16.1ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "username" varchar, "email" varchar, "mobile" varchar, "created_at" datetime, "updated_at" datetime, "password_digest" varchar, "admin" boolean DEFAULT 'f') 
  [1m[36m (14.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.2ms)[0m  select sqlite_version(*)
  [1m[36m (10.4ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (11.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160602023244')[0m
  [1m[35m (9.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160601133413')
  [1m[36m (10.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160601135919')[0m
  [1m[35m (10.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160528025621')
  [1m[36m (12.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160601134917')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/merchandises" for 127.0.0.1 at 2016-06-03 08:38:41 +0000
Processing by MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
  Rendered merchandises/_merchandise.html.erb (5.3ms)
  Rendered merchandises/index.html.erb within layouts/application (25.9ms)
Completed 200 OK in 536ms (Views: 508.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-03 09:09:43 +0000
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-03 09:11:18 +0000
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-03 09:12:51 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 62ms (Views: 2.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-03 12:58:37 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 44ms (Views: 1.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-03 12:59:11 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 29ms (Views: 1.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-03 12:59:11.836213"], ["updated_at", "2016-06-03 12:59:11.836213"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (39.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-03 12:59:11.844173"], ["updated_at", "2016-06-03 12:59:11.844173"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-03 12:59:55.748746"], ["updated_at", "2016-06-03 12:59:55.748746"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-03 12:59:55.756842"], ["updated_at", "2016-06-03 12:59:55.756842"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-03 12:59:55 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-03 12:59:55 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-03 13:00:55 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 32ms (Views: 1.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-03 13:00:56.023566"], ["updated_at", "2016-06-03 13:00:56.023566"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-03 13:00:56.032355"], ["updated_at", "2016-06-03 13:00:56.032355"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-03 13:00:56 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 18ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 10:59:00.213144"], ["updated_at", "2016-06-04 10:59:00.213144"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (28.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 10:59:00.221170"], ["updated_at", "2016-06-04 10:59:00.221170"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-04 10:59:00 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 26ms (Views: 1.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 10:59:00.470578"], ["updated_at", "2016-06-04 10:59:00.470578"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-04 10:59:00 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-04 10:59:00 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 10:59:56.524388"], ["updated_at", "2016-06-04 10:59:56.524388"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-04 10:59:56 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 33ms (Views: 1.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-04 10:59:56 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 10:59:56.746135"], ["updated_at", "2016-06-04 10:59:56.746135"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 10:59:56.756268"], ["updated_at", "2016-06-04 10:59:56.756268"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-04 10:59:56 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-04 11:01:45 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 29ms (Views: 1.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 11:01:45.378834"], ["updated_at", "2016-06-04 11:01:45.378834"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-04 11:01:45 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 16ms (Views: 0.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 11:01:45.410763"], ["updated_at", "2016-06-04 11:01:45.410763"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 11:01:45.414020"], ["updated_at", "2016-06-04 11:01:45.414020"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-04 11:01:45 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-04 11:02:04 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 29ms (Views: 1.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 11:02:04.405630"], ["updated_at", "2016-06-04 11:02:04.405630"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-04 11:02:04 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 14ms (Views: 0.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 11:02:04.436439"], ["updated_at", "2016-06-04 11:02:04.436439"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 11:02:04.438797"], ["updated_at", "2016-06-04 11:02:04.438797"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-04 11:02:04 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 11:08:31.722460"], ["updated_at", "2016-06-04 11:08:31.722460"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-04 11:08:31 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 42ms (Views: 1.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-04 11:08:31 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 11:08:31.955711"], ["updated_at", "2016-06-04 11:08:31.955711"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-04 11:08:31.958818"], ["updated_at", "2016-06-04 11:08:31.958818"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-04 11:08:31 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:22:26.054813"], ["updated_at", "2016-06-06 12:22:26.054813"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 12:22:26 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.4ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 42ms (Views: 1.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:22:26.314455"], ["updated_at", "2016-06-06 12:22:26.314455"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:22:26.321714"], ["updated_at", "2016-06-06 12:22:26.321714"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 12:22:26 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 12:22:26 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 12:22:47 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 40ms (Views: 1.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:22:47.305326"], ["updated_at", "2016-06-06 12:22:47.305326"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 12:22:47 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 24ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:22:47.350856"], ["updated_at", "2016-06-06 12:22:47.350856"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.2ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:22:47.354328"], ["updated_at", "2016-06-06 12:22:47.354328"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 12:22:47 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.4ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 12:24:07 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 36ms (Views: 2.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:24:08.077228"], ["updated_at", "2016-06-06 12:24:08.077228"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 12:24:08 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 18ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:24:08.114361"], ["updated_at", "2016-06-06 12:24:08.114361"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:24:08.116927"], ["updated_at", "2016-06-06 12:24:08.116927"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 12:24:08 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (20.8ms)[0m  [1mCREATE TABLE "categories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (9.9ms)[0m  CREATE TABLE "merchandises" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" text, "price" integer, "amount" integer, "created_at" datetime, "updated_at" datetime, "user_id" integer) 
  [1m[36m (15.3ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "username" varchar, "email" varchar, "mobile" varchar, "created_at" datetime, "updated_at" datetime, "password_digest" varchar, "admin" boolean DEFAULT 'f') [0m
  [1m[35m (11.7ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (14.7ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.2ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (10.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160606122427')
  [1m[36m (8.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160601133413')[0m
  [1m[35m (11.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160601135919')
  [1m[36m (10.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160528025621')[0m
  [1m[35m (11.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160601134917')
  [1m[36m (12.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160602023244')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 12:43:25 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 45ms (Views: 1.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:43:25.278714"], ["updated_at", "2016-06-06 12:43:25.278714"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 12:43:25 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 16ms (Views: 1.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:43:25.311118"], ["updated_at", "2016-06-06 12:43:25.311118"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:43:25.316363"], ["updated_at", "2016-06-06 12:43:25.316363"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 12:43:25 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:44:56.310130"], ["updated_at", "2016-06-06 12:44:56.310130"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 12:44:56 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 48ms (Views: 6.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:44:56.617982"], ["updated_at", "2016-06-06 12:44:56.617982"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:44:56.625201"], ["updated_at", "2016-06-06 12:44:56.625201"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 12:44:56 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 4ms (Views: 2.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 12:44:56 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 12:45:28 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 36ms (Views: 1.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:45:28.364579"], ["updated_at", "2016-06-06 12:45:28.364579"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 12:45:28 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 0.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:45:28.410375"], ["updated_at", "2016-06-06 12:45:28.410375"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:45:28.413652"], ["updated_at", "2016-06-06 12:45:28.413652"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 12:45:28 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 12:46:39.259114"], ["updated_at", "2016-06-06 12:46:39.259114"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:46:39.298578"], ["updated_at", "2016-06-06 12:46:39.298578"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:46:39.305165"], ["updated_at", "2016-06-06 12:46:39.305165"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 12:46:39 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 49ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 12:46:39 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:46:39.613224"], ["updated_at", "2016-06-06 12:46:39.613224"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 12:46:39 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 1.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:48:02.109773"], ["updated_at", "2016-06-06 12:48:02.109773"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:48:02.118726"], ["updated_at", "2016-06-06 12:48:02.118726"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 12:48:02 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 29ms (Views: 1.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 12:48:02 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:48:02.331659"], ["updated_at", "2016-06-06 12:48:02.331659"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 12:48:02 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 7ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'a' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:48:02.388624"], ["updated_at", "2016-06-06 12:48:02.388624"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 12:48:57.939170"], ["updated_at", "2016-06-06 12:48:57.939170"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (4.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:51:44.770105"], ["updated_at", "2016-06-06 12:51:44.770105"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:51:44.781638"], ["updated_at", "2016-06-06 12:51:44.781638"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:51:44.785458"], ["updated_at", "2016-06-06 12:51:44.785458"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.6ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:54:24.440756"], ["updated_at", "2016-06-06 12:54:24.440756"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (5.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:54:24.454271"], ["updated_at", "2016-06-06 12:54:24.454271"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:54:24.463918"], ["updated_at", "2016-06-06 12:54:24.463918"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:55:26.683090"], ["updated_at", "2016-06-06 12:55:26.683090"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:55:26.711970"], ["updated_at", "2016-06-06 12:55:26.711970"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:55:26.754569"], ["updated_at", "2016-06-06 12:55:26.754569"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:56:11.728716"], ["updated_at", "2016-06-06 12:56:11.728716"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
Completed 500 Internal Server Error in 23ms (ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:56:11.765889"], ["updated_at", "2016-06-06 12:56:11.765889"]]
  [1m[35m (7.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:56:11.783960"], ["updated_at", "2016-06-06 12:56:11.783960"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:57:10.482665"], ["updated_at", "2016-06-06 12:57:10.482665"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  Rendered categories/new.html.erb within layouts/application (6.8ms)
Completed 200 OK in 488ms (Views: 487.7ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (1.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:57:10.996644"], ["updated_at", "2016-06-06 12:57:10.996644"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  Rendered categories/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 12ms (Views: 11.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.5ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:57:11.021609"], ["updated_at", "2016-06-06 12:57:11.021609"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (1.1ms)
Completed 200 OK in 12ms (Views: 11.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:57:21.294332"], ["updated_at", "2016-06-06 12:57:21.294332"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 12:57:21 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 30ms (Views: 0.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 12:57:21 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:57:21.505958"], ["updated_at", "2016-06-06 12:57:21.505958"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 12:57:21.508425"], ["updated_at", "2016-06-06 12:57:21.508425"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 12:57:21 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 12:57:21.558492"], ["updated_at", "2016-06-06 12:57:21.558492"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (5.9ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 12:57:21.586335"], ["updated_at", "2016-06-06 12:57:21.586335"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (9.0ms)
Completed 200 OK in 343ms (Views: 342.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 12:57:21.942990"], ["updated_at", "2016-06-06 12:57:21.942990"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  Rendered categories/index.html.erb within layouts/application (0.5ms)
Completed 200 OK in 5ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 12:57:21.954270"], ["updated_at", "2016-06-06 12:57:21.954270"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  Rendered categories/new.html.erb within layouts/application (0.3ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 12:58:48 +0000
Processing by CategoriesController#new as HTML
  Rendered categories/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 270ms (Views: 253.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 12:58:48 +0000
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 12:59:16 +0000
Processing by CategoriesController#new as HTML
  Rendered categories/new.html.erb within layouts/application (4.8ms)
Completed 200 OK in 350ms (Views: 330.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 12:59:16 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:02:59 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (5.0ms)
  Rendered categories/new.html.erb within layouts/application (57.0ms)
Completed 200 OK in 336ms (Views: 314.0ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:02:59 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:04:07 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (6.0ms)
  Rendered categories/new.html.erb within layouts/application (50.6ms)
Completed 200 OK in 352ms (Views: 324.6ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:04:08 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:04:08.358136"], ["updated_at", "2016-06-06 13:04:08.358136"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 68ms (ActiveRecord: 0.9ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:04:08 +0000
Processing by CategoriesController#index as HTML
  Rendered categories/index.html.erb within layouts/application (0.4ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:05:24 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (7.4ms)
  Rendered categories/new.html.erb within layouts/application (71.3ms)
Completed 200 OK in 465ms (Views: 438.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:05:25 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:05:25.440524"], ["updated_at", "2016-06-06 13:05:25.440524"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 84ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:05:25 +0000
Processing by CategoriesController#index as HTML
  Rendered categories/index.html.erb within layouts/application (8.2ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:06:05 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (6.5ms)
  Rendered categories/new.html.erb within layouts/application (61.0ms)
Completed 200 OK in 407ms (Views: 380.8ms | ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:06:05 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:06:05.670678"], ["updated_at", "2016-06-06 13:06:05.670678"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 77ms (ActiveRecord: 0.9ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:06:05 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (5.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (3.1ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:06:16.661986"], ["updated_at", "2016-06-06 13:06:16.661986"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:06:16.686995"], ["updated_at", "2016-06-06 13:06:16.686995"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:06:16 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 30ms (Views: 0.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:06:16.885986"], ["updated_at", "2016-06-06 13:06:16.885986"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:06:16.893076"], ["updated_at", "2016-06-06 13:06:16.893076"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:06:16 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:06:16 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:06:16.929587"], ["updated_at", "2016-06-06 13:06:16.929587"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (3.3ms)
Completed 200 OK in 290ms (Views: 289.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:06:17.230776"], ["updated_at", "2016-06-06 13:06:17.230776"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (7.2ms)
Completed 200 OK in 11ms (Views: 10.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:06:17.246517"], ["updated_at", "2016-06-06 13:06:17.246517"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.5ms)
  Rendered categories/new.html.erb within layouts/application (33.3ms)
Completed 200 OK in 37ms (Views: 36.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:06:17 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:06:17 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:06:17.309250"], ["updated_at", "2016-06-06 13:06:17.309250"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 10ms (ActiveRecord: 0.6ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:06:17 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:07:04.495144"], ["updated_at", "2016-06-06 13:07:04.495144"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (4.9ms)
Completed 200 OK in 318ms (Views: 317.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:07:04.829131"], ["updated_at", "2016-06-06 13:07:04.829131"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.6ms)
  Rendered categories/new.html.erb within layouts/application (43.7ms)
Completed 200 OK in 49ms (Views: 48.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:07:04.884851"], ["updated_at", "2016-06-06 13:07:04.884851"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.5ms)
Completed 200 OK in 50ms (Views: 49.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:07:04.952674"], ["updated_at", "2016-06-06 13:07:04.952674"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:07:04 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 18ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:07:04 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:07:05.009180"], ["updated_at", "2016-06-06 13:07:05.009180"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 12ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:07:05 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------
ListingMerchandisesTest: test_return_list_of_all_merchandises
-------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:07:05 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 13ms (Views: 1.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandise_by_id
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:07:05.070425"], ["updated_at", "2016-06-06 13:07:05.070425"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:07:05 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 15ms (Views: 1.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
ListingMerchandisesTest: test_returns_merchandises_filtered_by_price
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:07:05.100720"], ["updated_at", "2016-06-06 13:07:05.100720"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:07:05.105627"], ["updated_at", "2016-06-06 13:07:05.105627"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:07:05 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 5ms (Views: 2.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$2Y780oe2UOqGB4ncn6eER.NYwCfaVj8.PcuA1wufRMP.pVGfOzzY."], ["created_at", "2016-06-06 13:13:35.370301"], ["updated_at", "2016-06-06 13:13:35.370301"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$1XB9yExmRYHuowscSdtu5uuYdvnyaQlA4m/dC3d.6rj2vebXnUOPm"], ["created_at", "2016-06-06 13:13:35.379267"], ["updated_at", "2016-06-06 13:13:35.379267"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?username=john" for 127.0.0.1 at 2016-06-06 13:13:35 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 32ms (Views: 1.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:13:35 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$w4x8LlRfYlnoPu7vEdIx0Ojoh/phMrGtN079qJhjBtkb8Q.GUtw7W"], ["created_at", "2016-06-06 13:13:35.627645"], ["updated_at", "2016-06-06 13:13:35.627645"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (4.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:13:35.653126"], ["updated_at", "2016-06-06 13:13:35.653126"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:13:35.676304"], ["updated_at", "2016-06-06 13:13:35.676304"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.5ms)
  Rendered categories/new.html.erb within layouts/application (35.0ms)
Completed 200 OK in 365ms (Views: 363.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:13:36.052998"], ["updated_at", "2016-06-06 13:13:36.052998"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:13:36.067144"], ["updated_at", "2016-06-06 13:13:36.067144"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.3ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:13:36.083584"], ["updated_at", "2016-06-06 13:13:36.083584"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:13:36.086051"], ["updated_at", "2016-06-06 13:13:36.086051"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:13:36 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 11ms (Views: 1.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:13:36 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:13:36.114111"], ["updated_at", "2016-06-06 13:13:36.114111"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:13:36 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.1ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:13:36 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:13:36 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:13:36.141916"], ["updated_at", "2016-06-06 13:13:36.141916"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 5ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:13:36 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:14:14 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 43ms (Views: 1.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:14:14.772102"], ["updated_at", "2016-06-06 13:14:14.772102"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:14:14 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 24ms (Views: 0.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:14:14.808481"], ["updated_at", "2016-06-06 13:14:14.808481"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:14:14.810862"], ["updated_at", "2016-06-06 13:14:14.810862"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:14:14 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:14:14 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.6ms)
  Rendered categories/new.html.erb within layouts/application (37.9ms)
Completed 200 OK in 400ms (Views: 394.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:14:15 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:14:15.263793"], ["updated_at", "2016-06-06 13:14:15.263793"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 24ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:14:15 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:14:15.284734"], ["updated_at", "2016-06-06 13:14:15.284734"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:14:15.293750"], ["updated_at", "2016-06-06 13:14:15.293750"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:14:15.306640"], ["updated_at", "2016-06-06 13:14:15.306640"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:14:15.315481"], ["updated_at", "2016-06-06 13:14:15.315481"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.4ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$NloCEcB1oBaefDleVUQ1hOjz/ArWXfVR1O1Jp69QhYnLeEUAcfUZC"], ["created_at", "2016-06-06 13:14:15.346789"], ["updated_at", "2016-06-06 13:14:15.346789"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:14:15 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$3oLSJzVT7QORPxe/rk/kpuGQcL/Almppwj1QZXFoPNrnM0blMLJzS"], ["created_at", "2016-06-06 13:14:15.372703"], ["updated_at", "2016-06-06 13:14:15.372703"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$oDnFbA7lNNcS8PU1Y3eUsusNoe237qDIsCyhtIQ/KNHiGJm4ZAWKG"], ["created_at", "2016-06-06 13:14:15.378352"], ["updated_at", "2016-06-06 13:14:15.378352"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?username=john" for 127.0.0.1 at 2016-06-06 13:14:15 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mMerchandise Load (0.1ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:14:15 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:14:57.623736"], ["updated_at", "2016-06-06 13:14:57.623736"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.4ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (4.6ms)
Completed 200 OK in 276ms (Views: 275.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:14:57.913465"], ["updated_at", "2016-06-06 13:14:57.913465"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.7ms)
  Rendered categories/new.html.erb within layouts/application (46.4ms)
Completed 200 OK in 50ms (Views: 49.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:14:57.969424"], ["updated_at", "2016-06-06 13:14:57.969424"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.5ms)
Completed 200 OK in 39ms (Views: 39.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:14:58 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (3.0ms)
Completed 200 OK in 18ms (Views: 5.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:14:58 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:14:58.056095"], ["updated_at", "2016-06-06 13:14:58.056095"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 6ms (ActiveRecord: 0.5ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:14:58 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:14:58 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 18ms (Views: 1.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$MHmDtSCJ0tMG4xZk7vqXQOs1DB/xXYJN4drhVXJHKRFiS7zlBoLUW"], ["created_at", "2016-06-06 13:14:58.124264"], ["updated_at", "2016-06-06 13:14:58.124264"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$KSgStNxGMY5x87ebx.2teOLL7fAxOS4UgfJ48utgixGULmn.UpeQe"], ["created_at", "2016-06-06 13:14:58.130255"], ["updated_at", "2016-06-06 13:14:58.130255"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?username=john" for 127.0.0.1 at 2016-06-06 13:14:58 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 14ms (Views: 1.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:14:58 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.3ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:14:58.207703"], ["updated_at", "2016-06-06 13:14:58.207703"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:14:58 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:14:58.237500"], ["updated_at", "2016-06-06 13:14:58.237500"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:14:58.240328"], ["updated_at", "2016-06-06 13:14:58.240328"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:14:58 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.2ms)
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:14:58.275000"], ["updated_at", "2016-06-06 13:14:58.275000"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:15:36.378103"], ["updated_at", "2016-06-06 13:15:36.378103"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.6ms)
  Rendered categories/new.html.erb within layouts/application (40.3ms)
Completed 200 OK in 314ms (Views: 313.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:15:36.705706"], ["updated_at", "2016-06-06 13:15:36.705706"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.2ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:15:36.716790"], ["updated_at", "2016-06-06 13:15:36.716790"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.3ms)
Completed 200 OK in 33ms (Views: 32.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:15:36 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 18ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:15:36 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:15:36.796609"], ["updated_at", "2016-06-06 13:15:36.796609"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 6ms (ActiveRecord: 0.5ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:15:36 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:15:36.830730"], ["updated_at", "2016-06-06 13:15:36.830730"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:15:36 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 18ms (Views: 1.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:15:36 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:15:36.882613"], ["updated_at", "2016-06-06 13:15:36.882613"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:15:36.887729"], ["updated_at", "2016-06-06 13:15:36.887729"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:15:36 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:15:36.917128"], ["updated_at", "2016-06-06 13:15:36.917128"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$QCW0/W9PZOrRmLAGV7dkg.wmoH8W3f8b3NH898WT9IDdmokZ7Hwyq"], ["created_at", "2016-06-06 13:15:36.974564"], ["updated_at", "2016-06-06 13:15:36.974564"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$O.JyDlZSyGXVlpkEY4qXEeygYsaUPuQon9CHz56Y1IgvfYWscVUAa"], ["created_at", "2016-06-06 13:15:36.982278"], ["updated_at", "2016-06-06 13:15:36.982278"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:15:36 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:15:37 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:16:51 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (4.6ms)
  Rendered categories/new.html.erb within layouts/application (68.5ms)
Completed 200 OK in 390ms (Views: 360.0ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:16:51 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:16:51.799569"], ["updated_at", "2016-06-06 13:16:51.799569"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 73ms (ActiveRecord: 1.0ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:16:51 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 7ms (Views: 6.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:16:51.823405"], ["updated_at", "2016-06-06 13:16:51.823405"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:16:51.839823"], ["updated_at", "2016-06-06 13:16:51.839823"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.5ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:16:51.850771"], ["updated_at", "2016-06-06 13:16:51.850771"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (0.6ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:16:51.867995"], ["updated_at", "2016-06-06 13:16:51.867995"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:16:51 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 20ms (Views: 5.5ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$6FZpxpLZBtegyoi4guyJ.OSTkyTQbCbRpjQkUs5zn.QW8A9udQACi"], ["created_at", "2016-06-06 13:16:51.938443"], ["updated_at", "2016-06-06 13:16:51.938443"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$UO4lowOhGxLXVdvlwKkVSeJHxeHV0sRuE6Zon.3JJ1E8FNuHAp3Au"], ["created_at", "2016-06-06 13:16:51.949939"], ["updated_at", "2016-06-06 13:16:51.949939"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:16:51 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 29ms (Views: 2.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$GAXZnmUlirphDEqkmKPwSu3ZFS0WXWi8v/KUNjPJ.58Q338BVuIH2"], ["created_at", "2016-06-06 13:16:51.999180"], ["updated_at", "2016-06-06 13:16:51.999180"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:16:52 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:16:52 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 26ms (Views: 2.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:16:52.094926"], ["updated_at", "2016-06-06 13:16:52.094926"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:16:52.100484"], ["updated_at", "2016-06-06 13:16:52.100484"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:16:52 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:16:52.119089"], ["updated_at", "2016-06-06 13:16:52.119089"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:16:52 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:18:40 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 33ms (Views: 1.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:18:40.123567"], ["updated_at", "2016-06-06 13:18:40.123567"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:18:40 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 17ms (Views: 0.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:18:40.156264"], ["updated_at", "2016-06-06 13:18:40.156264"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:18:40.158660"], ["updated_at", "2016-06-06 13:18:40.158660"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:18:40 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:18:40 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.6ms)
  Rendered categories/new.html.erb within layouts/application (40.0ms)
Completed 200 OK in 397ms (Views: 389.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:18:40 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:18:40.623866"], ["updated_at", "2016-06-06 13:18:40.623866"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 27ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:18:40 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:18:40 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:18:40 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (1.8ms)
  Rendered categories/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 8ms (Views: 4.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:18:40.676549"], ["updated_at", "2016-06-06 13:18:40.676549"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.4ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:18:40.690520"], ["updated_at", "2016-06-06 13:18:40.690520"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (0.6ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.1ms)
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:18:40.699536"], ["updated_at", "2016-06-06 13:18:40.699536"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.8ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:18:40.716701"], ["updated_at", "2016-06-06 13:18:40.716701"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$tAqTNzWENoaiHtgVTp.99.HB6iYIcI60bjDIMfOaK.LRbMXQ7Jxi6"], ["created_at", "2016-06-06 13:18:40.746001"], ["updated_at", "2016-06-06 13:18:40.746001"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$7nzGZs0gTwCyn/KcUaNM6e/B9UEcsF9udN76orUbYUdDEJO7O6Kku"], ["created_at", "2016-06-06 13:18:40.753083"], ["updated_at", "2016-06-06 13:18:40.753083"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:18:40 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:18:40 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$1lMn4xan4r4kKdR22/z6H.OBASYh059.4LiaJJkqASHpjmUyuEwfa"], ["created_at", "2016-06-06 13:18:40.791859"], ["updated_at", "2016-06-06 13:18:40.791859"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:18:40 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:18:49 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (3.8ms)
  Rendered categories/new.html.erb within layouts/application (63.0ms)
Completed 200 OK in 348ms (Views: 327.5ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:18:49 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (1.7ms)
  Rendered categories/new.html.erb within layouts/application (3.3ms)
Completed 200 OK in 66ms (Views: 5.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:18:49 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:18:49 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:18:49.725687"], ["updated_at", "2016-06-06 13:18:49.725687"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 5ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:18:49 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.3ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:18:49.741904"], ["updated_at", "2016-06-06 13:18:49.741904"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:18:49.755950"], ["updated_at", "2016-06-06 13:18:49.755950"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.4ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:18:49.764985"], ["updated_at", "2016-06-06 13:18:49.764985"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:18:49 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.4ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 17ms (Views: 5.3ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:18:49.831042"], ["updated_at", "2016-06-06 13:18:49.831042"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:18:49.835962"], ["updated_at", "2016-06-06 13:18:49.835962"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:18:49 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 15ms (Views: 2.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:18:49.872758"], ["updated_at", "2016-06-06 13:18:49.872758"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:18:49 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Vdj43usdioYl6JUdgG1bA.oEuPZAyl541Yq5S0hN61/JmoUAKsrVm"], ["created_at", "2016-06-06 13:18:49.931267"], ["updated_at", "2016-06-06 13:18:49.931267"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:18:49 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 7ms (Views: 4.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:18:49 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$pkIwBIjuc/YhWJfl8S/lg.BO8x9YppQAuVCc4WCKDk2WJDH3ua8Xm"], ["created_at", "2016-06-06 13:18:49.984509"], ["updated_at", "2016-06-06 13:18:49.984509"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$l56HurKx6HP/FJNxWcN27u9kZLF62PQ/GKNIhmV5AJhQ5RsFCXN/2"], ["created_at", "2016-06-06 13:18:49.992513"], ["updated_at", "2016-06-06 13:18:49.992513"]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:18:49 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:18:50.013259"], ["updated_at", "2016-06-06 13:18:50.013259"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:21:37.345464"], ["updated_at", "2016-06-06 13:21:37.345464"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:21:37 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 34ms (Views: 1.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:21:37.551206"], ["updated_at", "2016-06-06 13:21:37.551206"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:21:37.553633"], ["updated_at", "2016-06-06 13:21:37.553633"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:21:37 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 11ms (Views: 1.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:21:37 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:21:37 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.6ms)
  Rendered categories/new.html.erb within layouts/application (52.2ms)
Completed 200 OK in 369ms (Views: 362.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:21:37 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:21:37.989755"], ["updated_at", "2016-06-06 13:21:37.989755"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 24ms (ActiveRecord: 0.6ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:21:37 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.3ms)
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:21:38 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:21:38 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (1.6ms)
  Rendered categories/new.html.erb within layouts/application (3.1ms)
Completed 200 OK in 8ms (Views: 4.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:21:38.034094"], ["updated_at", "2016-06-06 13:21:38.034094"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:21:38.051930"], ["updated_at", "2016-06-06 13:21:38.051930"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:21:38.064223"], ["updated_at", "2016-06-06 13:21:38.064223"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.4ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:21:38.076097"], ["updated_at", "2016-06-06 13:21:38.076097"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$F.l/hn0uvap11GT0w9wKW.8CQmJakKedSbBKrvthCDgQQwFXzi/fy"], ["created_at", "2016-06-06 13:21:38.117130"], ["updated_at", "2016-06-06 13:21:38.117130"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:21:38 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Vgvzxa6APnfNioOxThgF0.d2ICJrq5imX9WPMI4TnBwvh/JMjLEre"], ["created_at", "2016-06-06 13:21:38.149461"], ["updated_at", "2016-06-06 13:21:38.149461"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$eGqrwBq126vqAba.eGY6Cef8.jIt/mjfADcg6WYcMeXL0PZGysI8C"], ["created_at", "2016-06-06 13:21:38.155079"], ["updated_at", "2016-06-06 13:21:38.155079"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:21:38 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:21:38 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-06 13:23:34.481144"], ["updated_at", "2016-06-06 13:23:34.481144"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-06 13:23:34.487194"], ["updated_at", "2016-06-06 13:23:34.487194"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:23:34 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (5.2ms)
Completed 200 OK in 367ms (Views: 350.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:23:35 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (1.1ms)
  Rendered categories/new.html.erb within layouts/application (91.5ms)
Completed 200 OK in 97ms (Views: 96.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:23:35 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (2.4ms)
  Rendered categories/new.html.erb within layouts/application (5.1ms)
Completed 200 OK in 20ms (Views: 7.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:23:35 +0000
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:23:35 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:23:35.185770"], ["updated_at", "2016-06-06 13:23:35.185770"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 5ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:23:35 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:23:35.204598"], ["updated_at", "2016-06-06 13:23:35.204598"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.7ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:23:35.225871"], ["updated_at", "2016-06-06 13:23:35.225871"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.1ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:23:35.242145"], ["updated_at", "2016-06-06 13:23:35.242145"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.2ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (1.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:23:35.296975"], ["updated_at", "2016-06-06 13:23:35.296975"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:23:35 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 49ms (Views: 20.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:23:35.387729"], ["updated_at", "2016-06-06 13:23:35.387729"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:23:35.392261"], ["updated_at", "2016-06-06 13:23:35.392261"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:23:35 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:23:35 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (2.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:23:35.440242"], ["updated_at", "2016-06-06 13:23:35.440242"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$nHQL/gEJQq0XpU5M6gvaXunZJtdBKyH02w.k2Z5V1gpfLo51GFoHW"], ["created_at", "2016-06-06 13:23:35.495828"], ["updated_at", "2016-06-06 13:23:35.495828"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:23:35 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.2ms)
  [1m[36m (4.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:23:35 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$bB7JiPMgylsy7OtpQP9n2.WMh45fuLCK9IZIRvLD8gD8FGZ7XkAXi"], ["created_at", "2016-06-06 13:23:35.551198"], ["updated_at", "2016-06-06 13:23:35.551198"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$euAkkTLv/yB/Tu1YCYtqx.KugloLvGbq1ZZ/TpZDmTVrfXvKcyqkG"], ["created_at", "2016-06-06 13:23:35.557736"], ["updated_at", "2016-06-06 13:23:35.557736"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:23:35 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:25:37.498112"], ["updated_at", "2016-06-06 13:25:37.498112"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:25:37.507943"], ["updated_at", "2016-06-06 13:25:37.507943"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (1.7ms)
Completed 200 OK in 1043ms (Views: 1042.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:25:38.556448"], ["updated_at", "2016-06-06 13:25:38.556448"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:25:38.561632"], ["updated_at", "2016-06-06 13:25:38.561632"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:25:38 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 51ms (Views: 1.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:25:38.667373"], ["updated_at", "2016-06-06 13:25:38.667373"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:25:38 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 9ms (Views: 0.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:25:38.686343"], ["updated_at", "2016-06-06 13:25:38.686343"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:25:38.688889"], ["updated_at", "2016-06-06 13:25:38.688889"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:25:38 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:25:38.713194"], ["updated_at", "2016-06-06 13:25:38.713194"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$AilBMRBQNFC6x9kYwGhNB.LxBGxhwxYN3xQ1OKegvEK3zJgM.5hUC"], ["created_at", "2016-06-06 13:25:38.745502"], ["updated_at", "2016-06-06 13:25:38.745502"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$WLheD.klG2otFqxDY6t9ReCYTdapBvgeShVJhNwHOaBx.hO3Pum2a"], ["created_at", "2016-06-06 13:25:38.752384"], ["updated_at", "2016-06-06 13:25:38.752384"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:25:38 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:25:38 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$OEcgq3TVJx2Grz4Aad9nW.QI54x/jfUU23SzZsiNJFSaqGu59J7m6"], ["created_at", "2016-06-06 13:25:38.781370"], ["updated_at", "2016-06-06 13:25:38.781370"]]
  [1m[35m (1.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:25:38 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:25:38 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:25:38 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "books"], ["created_at", "2016-06-06 13:25:38.829647"], ["updated_at", "2016-06-06 13:25:38.829647"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "programming"], ["created_at", "2016-06-06 13:25:38.833097"], ["updated_at", "2016-06-06 13:25:38.833097"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:25:38 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$GgUxcpusFsW2uhPg33tLiesLQQrb3qydI1jVRlZUqHJiirmM0tkZe"], ["admin", "t"], ["created_at", "2016-06-06 13:27:34.244631"], ["updated_at", "2016-06-06 13:27:34.244631"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:27:34.253412"], ["updated_at", "2016-06-06 13:27:34.253412"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$ug92Yl30DTwpwoy1kdJnOONK6qVVHxtGwK9IYxYSGZNq3TIh2ii1."], ["admin", "t"], ["created_at", "2016-06-06 13:27:34.265688"], ["updated_at", "2016-06-06 13:27:34.265688"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:27:34.268679"], ["updated_at", "2016-06-06 13:27:34.268679"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (1.8ms)
Completed 200 OK in 257ms (Views: 256.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$ZZGQKSJQeuJAU/qvmThYu.KkGnhfpPjDBIr2dIH6IwtVJZ2QY8fmi"], ["admin", "t"], ["created_at", "2016-06-06 13:27:34.570724"], ["updated_at", "2016-06-06 13:27:34.570724"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:27:34.574148"], ["updated_at", "2016-06-06 13:27:34.574148"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$oCCZxmfNtU3XP.3gNAnxSe6Lbf/fdAKWk1zvmpPDpRu0NDb526oe2"], ["admin", "t"], ["created_at", "2016-06-06 13:27:34.587460"], ["updated_at", "2016-06-06 13:27:34.587460"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:27:34.590276"], ["updated_at", "2016-06-06 13:27:34.590276"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (3.6ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$fGPE6vTgjYYsqc8WtQW.COEXjAnLXURyiZBgEr2OGruh2AVP.n9Gu"], ["admin", "t"], ["created_at", "2016-06-06 13:30:41.974009"], ["updated_at", "2016-06-06 13:30:41.974009"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:30:41.992461"], ["updated_at", "2016-06-06 13:30:41.992461"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$khQUiXJ1AZoMoJG3ry6iYOGZKmh.VWyV1WClz3Hvil0Bz8BMkEggO"], ["admin", "t"], ["created_at", "2016-06-06 13:30:42.007634"], ["updated_at", "2016-06-06 13:30:42.007634"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:30:42.012734"], ["updated_at", "2016-06-06 13:30:42.012734"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$nVo2WIZ5uU4NTrhRvmUu/OxYLEAiBOkDb9aobGCpmZf48peVs..bK"], ["admin", "t"], ["created_at", "2016-06-06 13:30:42.023047"], ["updated_at", "2016-06-06 13:30:42.023047"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:30:42.026902"], ["updated_at", "2016-06-06 13:30:42.026902"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (4.9ms)
Completed 200 OK in 373ms (Views: 371.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$B1KXMAlWW15j1BoOMxJ/EOeHMm4Yoipx9cuJ78EMTHByvG/qGeJQW"], ["admin", "t"], ["created_at", "2016-06-06 13:30:42.413200"], ["updated_at", "2016-06-06 13:30:42.413200"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:30:42.417384"], ["updated_at", "2016-06-06 13:30:42.417384"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.4ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$56XC0BcdhOHQ88rsIr2GmeTSULBJBSeOM2qVTMaiCm/VOo2KML97e"], ["admin", "t"], ["created_at", "2016-06-06 13:35:18.470954"], ["updated_at", "2016-06-06 13:35:18.470954"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:35:18.485476"], ["updated_at", "2016-06-06 13:35:18.485476"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (5.2ms)
Completed 200 OK in 301ms (Views: 300.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$KSep4HsBDcIwgBC73e1hE.zOhmTLviB1OlMwJs.XgUODaY/Cfj1Im"], ["admin", "t"], ["created_at", "2016-06-06 13:35:18.807791"], ["updated_at", "2016-06-06 13:35:18.807791"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:35:18.810555"], ["updated_at", "2016-06-06 13:35:18.810555"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$rJ7ig04FiSoI58vBqhN6GO7A1xS3jodPGrzlf/sD.0qYu7IQJHLPK"], ["admin", "t"], ["created_at", "2016-06-06 13:35:18.817896"], ["updated_at", "2016-06-06 13:35:18.817896"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:35:18.821928"], ["updated_at", "2016-06-06 13:35:18.821928"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.4ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$5yilW7tSZVdyrzSMiSu/Juw55smc1tyizuGgLjrhWXRePEyDyY6zm"], ["admin", "t"], ["created_at", "2016-06-06 13:35:18.833965"], ["updated_at", "2016-06-06 13:35:18.833965"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:35:18.836745"], ["updated_at", "2016-06-06 13:35:18.836745"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$0K0MlwXqY4neTFEhZAOwxu/lYtA8eRCMUOxbjIzXy3ri8Bt32SMu2"], ["admin", "t"], ["created_at", "2016-06-06 13:37:03.208341"], ["updated_at", "2016-06-06 13:37:03.208341"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:37:03.218199"], ["updated_at", "2016-06-06 13:37:03.218199"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (2.7ms)
Completed 200 OK in 267ms (Views: 266.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$.j36KvuU6aOv/CS6sLX1j.UfbCspvcLnaCxO1GPzVGEL/.Aig4HaC"], ["admin", "t"], ["created_at", "2016-06-06 13:37:03.507328"], ["updated_at", "2016-06-06 13:37:03.507328"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:37:03.510285"], ["updated_at", "2016-06-06 13:37:03.510285"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$fRlSiUXDJoyp/YQXW5uD7.SJoNLb5Cdy4V3PklWrp4BsqUt/afXMu"], ["admin", "t"], ["created_at", "2016-06-06 13:37:03.522004"], ["updated_at", "2016-06-06 13:37:03.522004"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:37:03.524657"], ["updated_at", "2016-06-06 13:37:03.524657"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.3ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Ram7.etWQ8pTWVHUpaAWWeNMDnMobIugMUWxNXOJI.o8r/u0t3P5O"], ["admin", "t"], ["created_at", "2016-06-06 13:37:03.537295"], ["updated_at", "2016-06-06 13:37:03.537295"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:37:03.570371"], ["updated_at", "2016-06-06 13:37:03.570371"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.6ms)
  Rendered categories/new.html.erb within layouts/application (37.9ms)
Completed 200 OK in 53ms (Views: 41.7ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-06 13:37:16.029220"], ["updated_at", "2016-06-06 13:37:16.029220"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-06 13:37:16.032388"], ["updated_at", "2016-06-06 13:37:16.032388"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:37:16 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (4.8ms)
Completed 200 OK in 349ms (Views: 332.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:37:16 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.4ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 12ms (Views: 1.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:37:16.622882"], ["updated_at", "2016-06-06 13:37:16.622882"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:37:16.625742"], ["updated_at", "2016-06-06 13:37:16.625742"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:37:16 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 11ms (Views: 1.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:37:16.646569"], ["updated_at", "2016-06-06 13:37:16.646569"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:37:16 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 1.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (2.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$PtacMauA4ROb/ITZSU.tmuOmLQvyuM.nai91f9Q4.4xiq5RZFcwrK"], ["admin", "t"], ["created_at", "2016-06-06 13:37:16.695669"], ["updated_at", "2016-06-06 13:37:16.695669"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:37:16.699167"], ["updated_at", "2016-06-06 13:37:16.699167"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$mGD.UvJ4Ps1D9IWWLxtUYe8xaHOKJa25sEdy5lPsIW603sKiX9gJW"], ["admin", "t"], ["created_at", "2016-06-06 13:37:16.717029"], ["updated_at", "2016-06-06 13:37:16.717029"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:37:16.721417"], ["updated_at", "2016-06-06 13:37:16.721417"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.6ms)
Completed 200 OK in 5ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$B6LkoTQ9BDOI/D7r5ccSFuhQrHSu2LRNs8767WeZYLF03W5nalLgq"], ["admin", "t"], ["created_at", "2016-06-06 13:37:16.735926"], ["updated_at", "2016-06-06 13:37:16.735926"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:37:16.739336"], ["updated_at", "2016-06-06 13:37:16.739336"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$fWBQdBQS/XtYo5WLqO42kOkrsZY7K6lVjtd9osBe4qb2R.1DQGvfy"], ["admin", "t"], ["created_at", "2016-06-06 13:37:16.758168"], ["updated_at", "2016-06-06 13:37:16.758168"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:37:16.762909"], ["updated_at", "2016-06-06 13:37:16.762909"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (2.0ms)
  Rendered categories/new.html.erb within layouts/application (76.2ms)
Completed 200 OK in 85ms (Views: 83.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:37:16 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:37:16 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:37:16 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$qpgCApRTzUZwyMxMra4bK.4NTcRJGvPmZVstNv6v0r1v5v.4CmxM6"], ["created_at", "2016-06-06 13:37:16.916506"], ["updated_at", "2016-06-06 13:37:16.916506"]]
  [1m[35m (1.5ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:37:16 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$bGUQ3ReddczGoKDhPmAgF.HZBKcnoeOzub7a6VFqKOniIE/ZpCgkS"], ["created_at", "2016-06-06 13:37:16.947530"], ["updated_at", "2016-06-06 13:37:16.947530"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$3sX1IVTMuNNpf3XizmarxuXF8Go0VJjBIxpHi9IUNK8nTq0241WnK"], ["created_at", "2016-06-06 13:37:16.957132"], ["updated_at", "2016-06-06 13:37:16.957132"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:37:16 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:37:16.976916"], ["updated_at", "2016-06-06 13:37:16.976916"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:39:19 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 59ms (Views: 1.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Ds7OjOx6CLOs7F7o1SnWce919QIzeg/qBA7zvhXhja/Vo7JDnlho."], ["created_at", "2016-06-06 13:39:19.292424"], ["updated_at", "2016-06-06 13:39:19.292424"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:39:19 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 14ms (Views: 0.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$mAoXtkkxl8cC7Qc2LWYZo.rtJYoeZ98YkAteDKmZpZ.GhZ45c8VUq"], ["created_at", "2016-06-06 13:39:19.319065"], ["updated_at", "2016-06-06 13:39:19.319065"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$CO1pAHMV7xeAsa.ySlFVQuczD/yAz552EBuOppnA.QAEiBYgIGJBK"], ["created_at", "2016-06-06 13:39:19.324289"], ["updated_at", "2016-06-06 13:39:19.324289"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:39:19 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 11ms (Views: 9.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."mobile" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-06 13:39:19 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
  Rendered sessions/new.html.erb within layouts/application (36.7ms)
Completed 200 OK in 366ms (Views: 364.4ms | ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:39:19 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."mobile" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-06 13:39:19 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
  Rendered sessions/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:39:19 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "books"], ["created_at", "2016-06-06 13:39:19.802064"], ["updated_at", "2016-06-06 13:39:19.802064"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "programming"], ["created_at", "2016-06-06 13:39:19.804620"], ["updated_at", "2016-06-06 13:39:19.804620"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:39:19 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:39:19 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:39:19.858090"], ["updated_at", "2016-06-06 13:39:19.858090"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:39:19 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:39:19.869433"], ["updated_at", "2016-06-06 13:39:19.869433"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:39:19.871504"], ["updated_at", "2016-06-06 13:39:19.871504"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:39:19 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:39:19.882869"], ["updated_at", "2016-06-06 13:39:19.882869"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$gt7uko73VQ6uWrPAQWHzguWo2OlHT8ZSau26ULE7bpEe9ZDG3loxi"], ["admin", "t"], ["created_at", "2016-06-06 13:39:19.897427"], ["updated_at", "2016-06-06 13:39:19.897427"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:39:19.900036"], ["updated_at", "2016-06-06 13:39:19.900036"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.7ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$lZGte2WlugpKPllJ1k611O9eLq0uMxJU3i3.Ng1rgwVAPZH/FU3zu"], ["admin", "t"], ["created_at", "2016-06-06 13:39:19.918256"], ["updated_at", "2016-06-06 13:39:19.918256"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:39:19.922009"], ["updated_at", "2016-06-06 13:39:19.922009"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$2FyK/79JQRGmp6iPJ3by4uEAsq.GgGPcPYqVGM16ftncLZHjpaK1S"], ["admin", "t"], ["created_at", "2016-06-06 13:39:19.934209"], ["updated_at", "2016-06-06 13:39:19.934209"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:39:19.937163"], ["updated_at", "2016-06-06 13:39:19.937163"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.6ms)
  Rendered categories/new.html.erb within layouts/application (9.1ms)
Completed 200 OK in 14ms (Views: 13.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$qY7SHdcuP11u48KeXcTAxuflU0AAhyqnoi71T12F/ECnEbjKVlEfG"], ["admin", "t"], ["created_at", "2016-06-06 13:39:19.960698"], ["updated_at", "2016-06-06 13:39:19.960698"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:39:19.963266"], ["updated_at", "2016-06-06 13:39:19.963266"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:48:28 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 31ms (Views: 1.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (1.8ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$iecg6IWcUkcBq35/UxeKdOceY/JJn9J2dlL1ZhYnZIp7zT3KxKYsO"], ["created_at", "2016-06-06 13:48:28.273838"], ["updated_at", "2016-06-06 13:48:28.273838"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:48:28 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 15ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$DiwwRs4gVebTxn8.rutZz.nW9PrZzwC7woQbLWcN1/Y.AovWzGuYO"], ["created_at", "2016-06-06 13:48:28.303047"], ["updated_at", "2016-06-06 13:48:28.303047"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$1Cm8sB44n5eOAKudhhqIh.QSEOwqQdvZnYHKUg.4M7iEVhyhGeHJC"], ["created_at", "2016-06-06 13:48:28.312787"], ["updated_at", "2016-06-06 13:48:28.312787"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:48:28 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."mobile" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-06 13:48:28 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
  Rendered sessions/new.html.erb within layouts/application (36.9ms)
Completed 200 OK in 377ms (Views: 374.9ms | ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:48:28 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."mobile" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-06 13:48:28 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
  Rendered sessions/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:48:28 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "books"], ["created_at", "2016-06-06 13:48:28.789079"], ["updated_at", "2016-06-06 13:48:28.789079"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "programming"], ["created_at", "2016-06-06 13:48:28.793368"], ["updated_at", "2016-06-06 13:48:28.793368"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:48:28 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:48:28.837624"], ["updated_at", "2016-06-06 13:48:28.837624"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:48:28.841557"], ["updated_at", "2016-06-06 13:48:28.841557"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:48:28 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:48:28 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:48:28.871037"], ["updated_at", "2016-06-06 13:48:28.871037"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:48:28 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$KtxZODZ.QKZBXPrjZwV4ROXqhdbetlJm1dANiDZY6IhlVpX4tCHFq"], ["admin", "t"], ["created_at", "2016-06-06 13:48:28.889026"], ["updated_at", "2016-06-06 13:48:28.889026"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:48:28.892494"], ["updated_at", "2016-06-06 13:48:28.892494"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$UdXrzYawDpJv6VyvYwMQ7uNk8LjmKdUXNyqr4/nl6p.rsZ36wG9pi"], ["admin", "t"], ["created_at", "2016-06-06 13:48:28.910009"], ["updated_at", "2016-06-06 13:48:28.910009"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:48:28.913063"], ["updated_at", "2016-06-06 13:48:28.913063"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.4ms)
Completed 200 OK in 4ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$NSjZAtGeEL0uet5ny691YOFrKpQgiZMerUf/N5lF7jhWItUGFXE1q"], ["admin", "t"], ["created_at", "2016-06-06 13:48:28.926108"], ["updated_at", "2016-06-06 13:48:28.926108"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:48:28.929151"], ["updated_at", "2016-06-06 13:48:28.929151"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.6ms)
  Rendered categories/new.html.erb within layouts/application (9.6ms)
Completed 200 OK in 14ms (Views: 13.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$0U2YzKdXK6d0kvAF6EM1oOXeqRNKACFlpER42NRkOVZLyaWfNCYQe"], ["admin", "t"], ["created_at", "2016-06-06 13:48:28.952880"], ["updated_at", "2016-06-06 13:48:28.952880"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (1.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:48:28.956738"], ["updated_at", "2016-06-06 13:48:28.956738"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:48:28.964374"], ["updated_at", "2016-06-06 13:48:28.964374"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$b3xjvHFPOFJ2TRBb9GXc0epvgmQ1nzudrKQ.tW/HUpJm3ByE76WFm"], ["created_at", "2016-06-06 13:49:22.272017"], ["updated_at", "2016-06-06 13:49:22.272017"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:49:22 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 43ms (Views: 1.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:49:22 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Bt16Rtolp.K9SfrYFDKj2uEhVtnRhGd5y0v9i.R06jSNVDlGNk.IW"], ["created_at", "2016-06-06 13:49:22.563861"], ["updated_at", "2016-06-06 13:49:22.563861"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$cIjZ6/7O0XpmfZK071BKqOEfztV1z53UQxDcZ8uTob39YZUdEHPAq"], ["created_at", "2016-06-06 13:49:22.571844"], ["updated_at", "2016-06-06 13:49:22.571844"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:49:22 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$J6cuXlHNl.EkTjZpvdfbCOFHL.Ao5/d2hOGaNjSP61o1fv5371YQK"], ["admin", "t"], ["created_at", "2016-06-06 13:49:22.612525"], ["updated_at", "2016-06-06 13:49:22.612525"]]
  [1m[36m (3.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:49:22.633017"], ["updated_at", "2016-06-06 13:49:22.633017"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (1.0ms)
  Rendered categories/new.html.erb within layouts/application (70.8ms)
Completed 200 OK in 601ms (Views: 599.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$GAQjVF73jMX1wsm6W2r6FOohcDkQEDgWt5sEyWRnphSAnvowTGjp."], ["admin", "t"], ["created_at", "2016-06-06 13:49:23.258760"], ["updated_at", "2016-06-06 13:49:23.258760"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:49:23.266825"], ["updated_at", "2016-06-06 13:49:23.266825"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.6ms)
Completed 200 OK in 7ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$eriAheEiHunIzi2sxTusK.Eze2t/yrXQmEPJc7swr514057fW3.De"], ["admin", "t"], ["created_at", "2016-06-06 13:49:23.293240"], ["updated_at", "2016-06-06 13:49:23.293240"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:49:23.298865"], ["updated_at", "2016-06-06 13:49:23.298865"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$d7ikOCIm3Y3UDzhd4GuMZ.Ka.Rh70z/1S7TL2rJrpwgVyqs0ole9y"], ["admin", "t"], ["created_at", "2016-06-06 13:49:23.317618"], ["updated_at", "2016-06-06 13:49:23.317618"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:49:23.322470"], ["updated_at", "2016-06-06 13:49:23.322470"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:49:23.358024"], ["updated_at", "2016-06-06 13:49:23.358024"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:49:23.393351"], ["updated_at", "2016-06-06 13:49:23.393351"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:49:23 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 3.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:49:23 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:49:23.436656"], ["updated_at", "2016-06-06 13:49:23.436656"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:49:23.440094"], ["updated_at", "2016-06-06 13:49:23.440094"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:49:23 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-06 13:49:23.456087"], ["updated_at", "2016-06-06 13:49:23.456087"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-06 13:49:23.459634"], ["updated_at", "2016-06-06 13:49:23.459634"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:49:23 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."mobile" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-06 13:49:23 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
  Rendered sessions/new.html.erb within layouts/application (12.3ms)
Completed 200 OK in 27ms (Views: 24.2ms | ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:49:23 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."mobile" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-06 13:49:23 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:49:23 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (4.9ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:51:34.362213"], ["updated_at", "2016-06-06 13:51:34.362213"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:51:34.391572"], ["updated_at", "2016-06-06 13:51:34.391572"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:51:34 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 35ms (Views: 1.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:51:34 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:51:34.623915"], ["updated_at", "2016-06-06 13:51:34.623915"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:51:34.626636"], ["updated_at", "2016-06-06 13:51:34.626636"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:51:34 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$maq4QsF0eklzmOhlYvN1xuqKZitYyyGu0edkimjLAokwIybbKBPqC"], ["created_at", "2016-06-06 13:51:34.683550"], ["updated_at", "2016-06-06 13:51:34.683550"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:51:34 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:51:34 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$nXjnGXDpZhLrR4q6YVuoKOlYM6OyOGvUyhvu07zKc4TzVwCzczfra"], ["created_at", "2016-06-06 13:51:34.731100"], ["updated_at", "2016-06-06 13:51:34.731100"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$om1PYBHjkVvjChOeNgN1AeQf78zjcVxbcXZKS1XegSGpPG8GG8iW."], ["created_at", "2016-06-06 13:51:34.738253"], ["updated_at", "2016-06-06 13:51:34.738253"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:51:34 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-06 13:51:34.753519"], ["updated_at", "2016-06-06 13:51:34.753519"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-06 13:51:34.756935"], ["updated_at", "2016-06-06 13:51:34.756935"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:51:34 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (7.3ms)
Completed 200 OK in 357ms (Views: 356.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."mobile" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-06 13:51:35 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
  Rendered sessions/new.html.erb within layouts/application (28.7ms)
Completed 200 OK in 40ms (Views: 38.2ms | ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:51:35 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."mobile" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-06 13:51:35 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
  Rendered sessions/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:51:35 +0000
Processing by CategoriesController#new as HTML
Redirected to http://www.example.com/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$GXtKcCvCNq3CK1rcMg9kte4x/YLw02SU7iwmXzVNEqTEbYFapV.c6"], ["admin", "t"], ["created_at", "2016-06-06 13:51:35.266492"], ["updated_at", "2016-06-06 13:51:35.266492"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:51:35.271124"], ["updated_at", "2016-06-06 13:51:35.271124"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$MkBOM6GUS7vc5z6du6wXG.5qyq0SZNInc94FrnA2D81/DFAek4zXS"], ["admin", "t"], ["created_at", "2016-06-06 13:51:35.289352"], ["updated_at", "2016-06-06 13:51:35.289352"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:51:35.292237"], ["updated_at", "2016-06-06 13:51:35.292237"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.4ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$2S5o6yjaC2O.9XajFhuR7um9pJCbqctYtxOoQ.OQW..ihufagzxdq"], ["admin", "t"], ["created_at", "2016-06-06 13:51:35.305776"], ["updated_at", "2016-06-06 13:51:35.305776"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:51:35.309170"], ["updated_at", "2016-06-06 13:51:35.309170"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (1.1ms)
  Rendered categories/new.html.erb within layouts/application (12.8ms)
Completed 200 OK in 18ms (Views: 17.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$23fDKOZJplslZLaWwVsULe/LQdd4wZlStj8RrBJDeu3qzp3V0QzPa"], ["admin", "t"], ["created_at", "2016-06-06 13:51:35.337266"], ["updated_at", "2016-06-06 13:51:35.337266"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:51:35.346567"], ["updated_at", "2016-06-06 13:51:35.346567"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:52:21.388607"], ["updated_at", "2016-06-06 13:52:21.388607"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$MdrXX5tKC9LpH3/A.pO3hO4MoeZV13t8k.vMwRBCRdqY3GDoauxJC"], ["admin", "t"], ["created_at", "2016-06-06 13:52:21.619852"], ["updated_at", "2016-06-06 13:52:21.619852"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:52:21.623173"], ["updated_at", "2016-06-06 13:52:21.623173"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$jDuMv2xBrv6T8shf7FoATuBOyY21Ln2dxReoU.NXi9UoL1CLbLlQ6"], ["admin", "t"], ["created_at", "2016-06-06 13:52:21.640004"], ["updated_at", "2016-06-06 13:52:21.640004"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:52:21.642797"], ["updated_at", "2016-06-06 13:52:21.642797"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (7.2ms)
Completed 200 OK in 328ms (Views: 327.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$V1qJHzAe.m0wFOuNtEVZOuKb97.pezx9R58W45RvM.X7jL.QRRKUG"], ["admin", "t"], ["created_at", "2016-06-06 13:52:21.979071"], ["updated_at", "2016-06-06 13:52:21.979071"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-06 13:52:21.986812"], ["updated_at", "2016-06-06 13:52:21.986812"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.5ms)
  Rendered categories/new.html.erb within layouts/application (34.5ms)
Completed 200 OK in 54ms (Views: 38.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$AGEi02SAsc5kODOfY9kUrujkvaJIuDWd7keBu5Kdt2Ddcamv/fcLi"], ["admin", "t"], ["created_at", "2016-06-06 13:52:22.053996"], ["updated_at", "2016-06-06 13:52:22.053996"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:52:22.057021"], ["updated_at", "2016-06-06 13:52:22.057021"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.5ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 23ms (Views: 0.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$JvpgyeeLz78m6WvmmxRNu.INfTN7OLT0WBq/Yy5nwthM0fm5c1IxW"], ["created_at", "2016-06-06 13:52:22.136560"], ["updated_at", "2016-06-06 13:52:22.136560"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (2.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Irp3dTasdZLDC6vxRM1TNuHqQJleuzUWq578I8JHPi1ejlEqqCWZi"], ["created_at", "2016-06-06 13:52:22.153226"], ["updated_at", "2016-06-06 13:52:22.153226"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$tT12VOEfjw1OU9mZmCMSj.WzQrSDFsG/reWwU/AXyGMmizx4z9Bym"], ["created_at", "2016-06-06 13:52:22.158551"], ["updated_at", "2016-06-06 13:52:22.158551"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-06 13:52:22.168152"], ["updated_at", "2016-06-06 13:52:22.168152"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-06 13:52:22.170531"], ["updated_at", "2016-06-06 13:52:22.170531"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 16ms (Views: 1.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:52:22.224332"], ["updated_at", "2016-06-06 13:52:22.224332"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:52:22.235680"], ["updated_at", "2016-06-06 13:52:22.235680"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-06 13:52:22.238316"], ["updated_at", "2016-06-06 13:52:22.238316"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Qi5BiQ3OLr..7kKjEQlohuOyECM7ENEAN1N7IGi6Ku6cuQJ1Ed3iS"], ["admin", "t"], ["created_at", "2016-06-06 13:52:22.252105"], ["updated_at", "2016-06-06 13:52:22.252105"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-06 13:52:22.291738"], ["updated_at", "2016-06-06 13:52:22.291738"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (0.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$X9gDVNnJzY7Invcs0vxBFOI7FcXTaIp082pXPeZeJnvRCFThi6AbW"], ["admin", "t"], ["created_at", "2016-06-06 13:52:22.306790"], ["updated_at", "2016-06-06 13:52:22.306790"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.5ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-06 13:52:22 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (1.8ms)
  Rendered categories/new.html.erb within layouts/application (3.2ms)
Completed 200 OK in 9ms (Views: 4.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (13.9ms)[0m  [1mCREATE TABLE "categories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (12.5ms)[0m  CREATE TABLE "merchandises" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" text, "price" integer, "amount" integer, "created_at" datetime, "updated_at" datetime, "user_id" integer) 
  [1m[36m (11.7ms)[0m  [1mCREATE TABLE "subcategories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "category_id" integer) [0m
  [1m[35m (11.0ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "username" varchar, "email" varchar, "mobile" varchar, "created_at" datetime, "updated_at" datetime, "password_digest" varchar, "admin" boolean DEFAULT 'f') 
  [1m[36m (13.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.2ms)[0m  select sqlite_version(*)
  [1m[36m (11.4ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (10.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160607094922')[0m
  [1m[35m (11.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160601133413')
  [1m[36m (13.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160601135919')[0m
  [1m[35m (12.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160528025621')
  [1m[36m (9.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160601134917')[0m
  [1m[35m (27.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160602023244')
  [1m[36m (12.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160606122427')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$hmKZeTjEXoj7KrB4350C9eGi9grtJOyMZpK0w/fmnOvfNkWl5in9i"], ["admin", "t"], ["created_at", "2016-06-07 12:11:59.066170"], ["updated_at", "2016-06-07 12:11:59.066170"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:11:59 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 55ms (ActiveRecord: 0.4ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:11:59 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.7ms)
  Rendered categories/new.html.erb within layouts/application (73.3ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 7703ms (Views: 7692.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (2.3ms)
  Rendered categories/new.html.erb within layouts/application (3.9ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 15ms (Views: 7.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$4zMxmHut2ZeCREkTBP21bug.35z3QMB1ppT4LOZ0DY4Jzuoa30vmK"], ["admin", "t"], ["created_at", "2016-06-07 12:12:07.123777"], ["updated_at", "2016-06-07 12:12:07.123777"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.0ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (10.7ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:12:07.156630"], ["updated_at", "2016-06-07 12:12:07.156630"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 19ms (ActiveRecord: 11.4ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (2.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (3.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 11.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$lnXcXyztgLRVpA1l.uajAe0rIIVGE/thxw3CYsWavmN3WtfVEBnom"], ["created_at", "2016-06-07 12:12:07.234582"], ["updated_at", "2016-06-07 12:12:07.234582"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$dT9SmWwYFC7TAgblLsoH5elTTHXYWgTlEGNV4EnYEdUaEEnH8jWRi"], ["created_at", "2016-06-07 12:12:07.250949"], ["updated_at", "2016-06-07 12:12:07.250949"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$bbGegJ/dTW9mVSSmPiQvPehqJsNOqWcc/8By2.oQXuActOHTNOoUi"], ["created_at", "2016-06-07 12:12:07.257793"], ["updated_at", "2016-06-07 12:12:07.257793"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 22ms (Views: 1.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:12:07.332148"], ["updated_at", "2016-06-07 12:12:07.332148"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:12:07.350558"], ["updated_at", "2016-06-07 12:12:07.350558"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:12:07.353832"], ["updated_at", "2016-06-07 12:12:07.353832"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$1F9VZOF9bjO.GqcMpoxdsOLQK590vaDhTghlr.IVB7ou4bLmbhE8u"], ["admin", "t"], ["created_at", "2016-06-07 12:12:07.381732"], ["updated_at", "2016-06-07 12:12:07.381732"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:12:07.385465"], ["updated_at", "2016-06-07 12:12:07.385465"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.8ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$x1QKvxCbE3fxhnEoigNj6ugL4Xea4EaOjOyDMNnZnfEj1h2vEiG7K"], ["admin", "t"], ["created_at", "2016-06-07 12:12:07.418712"], ["updated_at", "2016-06-07 12:12:07.418712"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:12:07.427426"], ["updated_at", "2016-06-07 12:12:07.427426"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.4ms)
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$nxqrNqrKRJbaZs/C9rem9exc9QqInlb3mVyzucnRm4zmPbu1dWMFe"], ["admin", "t"], ["created_at", "2016-06-07 12:12:07.451930"], ["updated_at", "2016-06-07 12:12:07.451930"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:12:07.461222"], ["updated_at", "2016-06-07 12:12:07.461222"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (6.0ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (11.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 21ms (Views: 19.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$18yEcOpO8gyk4vHFK.P72eXhzmmrTwwGTsSRmyGid7qMi9u4bJLqK"], ["admin", "t"], ["created_at", "2016-06-07 12:12:07.494106"], ["updated_at", "2016-06-07 12:12:07.494106"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:12:07.499142"], ["updated_at", "2016-06-07 12:12:07.499142"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:12:07.520245"], ["updated_at", "2016-06-07 12:12:07.520245"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-07 12:12:07.531538"], ["updated_at", "2016-06-07 12:12:07.531538"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-07 12:12:07.535239"], ["updated_at", "2016-06-07 12:12:07.535239"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:12:07 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.8ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (4.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 16ms (Views: 12.0ms | ActiveRecord: 0.8ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
SubsubcategoryTest: test_name_should_be_present
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
SubsubcategoryTest: test_name_should_be_present
-----------------------------------------------
  [1m[36mSubcategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[35mSubcategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$mnfHFUj35NoATmHUWreBOOIMpPVcSYokJE9pcjYiiR6UWfdO1nzxm"], ["admin", "t"], ["created_at", "2016-06-07 12:13:18.438412"], ["updated_at", "2016-06-07 12:13:18.438412"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (7.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:13:18.451063"], ["updated_at", "2016-06-07 12:13:18.451063"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (4.8ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (3.4ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 506ms (Views: 504.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$gqOshPUN6xrcooPbHiVukeqPqZ1/ut8OCBRiTeK0DEqs0nPlk//V."], ["admin", "t"], ["created_at", "2016-06-07 12:13:18.979308"], ["updated_at", "2016-06-07 12:13:18.979308"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:13:18.983345"], ["updated_at", "2016-06-07 12:13:18.983345"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.7ms)
  Rendered categories/new.html.erb within layouts/application (55.0ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 83ms (Views: 62.9ms | ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$MvGpwu7hm9/VzCpIDxhdyexaqMeaQrV/yP5aeKNaclZvluiJ42UxO"], ["admin", "t"], ["created_at", "2016-06-07 12:13:19.078265"], ["updated_at", "2016-06-07 12:13:19.078265"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:13:19.081099"], ["updated_at", "2016-06-07 12:13:19.081099"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.4ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$AErouP2gEbsBlAKlqLU55uX1JsLv3D6VTicby1DoSqMfFqK0i79Qi"], ["admin", "t"], ["created_at", "2016-06-07 12:13:19.096469"], ["updated_at", "2016-06-07 12:13:19.096469"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:13:19.099898"], ["updated_at", "2016-06-07 12:13:19.099898"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 17ms (Views: 0.9ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$FGgweYPVpeEYiJW20ym0z.xKbM.0ht6W617ijT17Mo5WbKmeaofn2"], ["created_at", "2016-06-07 12:13:19.187765"], ["updated_at", "2016-06-07 12:13:19.187765"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$ju6401jcrASkcdgBwIWqNOC8ZxgySUrHM7yHI1ae4.7ZwSQfO21oi"], ["created_at", "2016-06-07 12:13:19.229734"], ["updated_at", "2016-06-07 12:13:19.229734"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$0zosctzGSe1l85uXa8f.3.sWkpghled2dc4FR0oXNAlv7Somsd68a"], ["created_at", "2016-06-07 12:13:19.236065"], ["updated_at", "2016-06-07 12:13:19.236065"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:13:19.258793"], ["updated_at", "2016-06-07 12:13:19.258793"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:13:19.286976"], ["updated_at", "2016-06-07 12:13:19.286976"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:13:19.290208"], ["updated_at", "2016-06-07 12:13:19.290208"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:13:19.330645"], ["updated_at", "2016-06-07 12:13:19.330645"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$JkSLO2NsB/fGWAh8yLFDee.6HR83SpFJ30uFH9Fmt0fdMfewNeBGW"], ["admin", "t"], ["created_at", "2016-06-07 12:13:19.354399"], ["updated_at", "2016-06-07 12:13:19.354399"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.3ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:13:19.409042"], ["updated_at", "2016-06-07 12:13:19.409042"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 12ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.0ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$azasiT34BBm48JOa6BbWJuCbPOxOhrl7WVIqvAqiEftNalkeHYTlC"], ["admin", "t"], ["created_at", "2016-06-07 12:13:19.429099"], ["updated_at", "2016-06-07 12:13:19.429099"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.0ms)
  [1m[36mCategory Load (0.4ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (2.0ms)
  Rendered categories/new.html.erb within layouts/application (3.8ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 7.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-07 12:13:19.475517"], ["updated_at", "2016-06-07 12:13:19.475517"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-07 12:13:19.478394"], ["updated_at", "2016-06-07 12:13:19.478394"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:13:19 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
SubsubcategoryTest: test_name_should_be_present
-----------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
SubsubcategoryTest: test_name_should_be_present
-----------------------------------------------
  [1m[36mSubcategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
SubsubcategoryTest: test_name_should_be_unique
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "subcategories" ("name", "category_id") VALUES (?, ?)  [["name", "Golf"], ["category_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:13:54.130082"], ["updated_at", "2016-06-07 12:13:54.130082"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-07 12:13:54 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 44ms (Views: 1.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:13:54.439612"], ["updated_at", "2016-06-07 12:13:54.439612"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:13:54.445330"], ["updated_at", "2016-06-07 12:13:54.445330"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-07 12:13:54 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 16ms (Views: 2.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:13:54.474033"], ["updated_at", "2016-06-07 12:13:54.474033"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-07 12:13:54 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 1.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Hwo9bYTElYAGFRNGm1JzLuhJhWVySHnHZLA76ptDNTutpDRdaQGNi"], ["admin", "t"], ["created_at", "2016-06-07 12:13:54.576225"], ["updated_at", "2016-06-07 12:13:54.576225"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:13:54.580050"], ["updated_at", "2016-06-07 12:13:54.580050"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.9ms)
  Rendered categories/new.html.erb within layouts/application (63.3ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (4.7ms)
  Rendered layouts/_messages.html.erb (1.0ms)
Completed 200 OK in 625ms (Views: 622.9ms | ActiveRecord: 0.6ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$QrMA8GSdyBCs4X/7wS9mRuRUjFI.6DFTpmsXz6iTKdTFZK6X8YjCa"], ["admin", "t"], ["created_at", "2016-06-07 12:13:55.228739"], ["updated_at", "2016-06-07 12:13:55.228739"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:13:55.233371"], ["updated_at", "2016-06-07 12:13:55.233371"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.7ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$pvcvRsA493p.6L95P9czKewBpvxCdYty2lERfRUeq7qyBiOG1kUSu"], ["admin", "t"], ["created_at", "2016-06-07 12:13:55.255168"], ["updated_at", "2016-06-07 12:13:55.255168"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:13:55.259501"], ["updated_at", "2016-06-07 12:13:55.259501"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$AdEUpR93psl4/TUHP/ieNeiwgmXzq3felDXX4C4nEv54V.y.qc0yW"], ["admin", "t"], ["created_at", "2016-06-07 12:13:55.277108"], ["updated_at", "2016-06-07 12:13:55.277108"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:13:55.280846"], ["updated_at", "2016-06-07 12:13:55.280846"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.7ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 69ms (Views: 68.7ms | ActiveRecord: 0.4ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$HkPuEyDvi0shk3rVxrzr6.OEVJWy47LKXsEHMT3tijkWzluCq.X5O"], ["admin", "t"], ["created_at", "2016-06-07 12:13:55.364535"], ["updated_at", "2016-06-07 12:13:55.364535"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:13:55 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:13:55 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (4.8ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 11.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:13:55 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (3.0ms)
  Rendered categories/new.html.erb within layouts/application (5.7ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 10.8ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$8azru5GYsEFDUZ1WHShaxu/x//DZnOPYcQiggx0OtgG1YmszToDUO"], ["admin", "t"], ["created_at", "2016-06-07 12:13:55.468545"], ["updated_at", "2016-06-07 12:13:55.468545"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:13:55 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:13:55 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.2ms)
  Rendered categories/new.html.erb within layouts/application (2.4ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 7.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:13:55 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:13:55.506444"], ["updated_at", "2016-06-07 12:13:55.506444"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:13:55 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.4ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$SO6wmJ0ALCRe7BQtpgBVGeBjzCm5cJhKGHci8u9lHnYbZ2xJAMH1."], ["created_at", "2016-06-07 12:13:55.537862"], ["updated_at", "2016-06-07 12:13:55.537862"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-07 12:13:55 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 1.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-07 12:13:55 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (4.1ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 6ms (Views: 1.4ms | ActiveRecord: 4.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$N3LFS2zyId7jauJqZqxQWOG/5D5AOJhX0/fSFy4yeL.iF25OnmVTi"], ["created_at", "2016-06-07 12:13:55.607309"], ["updated_at", "2016-06-07 12:13:55.607309"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$x5BX7CvWNYoY.9.WG8gtEuvIUQ/bdw5eQ.O4dK0apGP24klq7F8M2"], ["created_at", "2016-06-07 12:13:55.614445"], ["updated_at", "2016-06-07 12:13:55.614445"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-07 12:13:55 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 4ms (Views: 1.7ms | ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "books"], ["created_at", "2016-06-07 12:13:55.642115"], ["updated_at", "2016-06-07 12:13:55.642115"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "programming"], ["created_at", "2016-06-07 12:13:55.648072"], ["updated_at", "2016-06-07 12:13:55.648072"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:13:55 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (2.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (1.1ms)
Completed 200 OK in 11ms (Views: 9.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-07 12:14:12 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 38ms (Views: 4.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:14:12.947230"], ["updated_at", "2016-06-07 12:14:12.947230"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-07 12:14:12 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 28ms (Views: 1.4ms | ActiveRecord: 0.3ms)
  [1m[35m (3.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:14:12.994164"], ["updated_at", "2016-06-07 12:14:12.994164"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:14:12.998977"], ["updated_at", "2016-06-07 12:14:12.998977"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-07 12:14:13 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (4.6ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:14:13.056912"], ["updated_at", "2016-06-07 12:14:13.056912"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
SubsubcategoryTest: test_name_should_be_present
-----------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
SubsubcategoryTest: test_name_should_be_unique
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "subcategories" ("name", "category_id") VALUES (?, ?)  [["name", "Golf"], ["category_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_long
----------------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "books"], ["created_at", "2016-06-07 12:14:13.088814"], ["updated_at", "2016-06-07 12:14:13.088814"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "programming"], ["created_at", "2016-06-07 12:14:13.092475"], ["updated_at", "2016-06-07 12:14:13.092475"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:14:13 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (3.5ms)
  Rendered layouts/_messages.html.erb (2.1ms)
Completed 200 OK in 515ms (Views: 513.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$neD7zGe68FWNNlziiDTjsehfEPiAumOWVmH1eAWsBa0xv1cjUIx/m"], ["admin", "t"], ["created_at", "2016-06-07 12:14:13.670167"], ["updated_at", "2016-06-07 12:14:13.670167"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:14:13.674546"], ["updated_at", "2016-06-07 12:14:13.674546"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.5ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 10.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$zDsj24vBbzGs3vqu.jUW8el6aSgMM5Wy5PeXwYPHA/bpEdIIWzc8O"], ["admin", "t"], ["created_at", "2016-06-07 12:14:13.706060"], ["updated_at", "2016-06-07 12:14:13.706060"]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:14:13.711172"], ["updated_at", "2016-06-07 12:14:13.711172"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$PxG.694nJ1zQm6CRhzgKce5xceRbsd.h2U0Cxk2HECzJeDB858rqW"], ["admin", "t"], ["created_at", "2016-06-07 12:14:13.725492"], ["updated_at", "2016-06-07 12:14:13.725492"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (44.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:14:13.773658"], ["updated_at", "2016-06-07 12:14:13.773658"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.8ms)
  Rendered categories/new.html.erb within layouts/application (30.0ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (4.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 40ms (Views: 38.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$dFf9Yj4EgtM2LrRgyVvOA.WCz8kvy53EGPfBf7pJNoqBNCVTp7uqq"], ["admin", "t"], ["created_at", "2016-06-07 12:14:13.826054"], ["updated_at", "2016-06-07 12:14:13.826054"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:14:13.833453"], ["updated_at", "2016-06-07 12:14:13.833453"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (0.8ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$hfFd6GP5wz14kMKgqnVUYuW8w05vWIrxTEvNL.lqNJEmi1hpeV2Sa"], ["admin", "t"], ["created_at", "2016-06-07 12:14:13.848887"], ["updated_at", "2016-06-07 12:14:13.848887"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:14:13 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:14:13 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (1.8ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:14:13 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:14:13.898230"], ["updated_at", "2016-06-07 12:14:13.898230"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:14:13 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$tQ/XKvCqjf/hHYe.RBo8/OvUP3nLEAFhLHKa.GS/dIQ5eXeoIr6/a"], ["admin", "t"], ["created_at", "2016-06-07 12:14:13.921521"], ["updated_at", "2016-06-07 12:14:13.921521"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:14:13 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:14:13 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (1.9ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.3ms | ActiveRecord: 0.5ms)
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:14:13 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (1.8ms)
  Rendered categories/new.html.erb within layouts/application (3.7ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 7.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$kewXhP4NvnVvOTJR202F0.MwmXjEoD7lvajJdAZwgo5EjKL/rDz2W"], ["created_at", "2016-06-07 12:14:13.979412"], ["updated_at", "2016-06-07 12:14:13.979412"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-07 12:14:13 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-07 12:14:14 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$GHabK7HoekeQEB8ZdawW1.UQRLZJrALBgj4gTc0nvA81fWBNb49Rm"], ["created_at", "2016-06-07 12:14:14.036907"], ["updated_at", "2016-06-07 12:14:14.036907"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$Ey5BUDy5F8wDSxo0qIdp1eYsRFbz2BXvq9eYULx51fG44SlTcIgvm"], ["created_at", "2016-06-07 12:14:14.044394"], ["updated_at", "2016-06-07 12:14:14.044394"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-07 12:14:14 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-07 12:14:32 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 44ms (Views: 2.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:14:32.315237"], ["updated_at", "2016-06-07 12:14:32.315237"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-07 12:14:32 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 17ms (Views: 0.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:14:32.347369"], ["updated_at", "2016-06-07 12:14:32.347369"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:14:32.349819"], ["updated_at", "2016-06-07 12:14:32.349819"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-07 12:14:32 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$4LJhqgjNqBe2s1SCdiIAy.sWreshOlEZkSnIkGJoeDDNGktUC0Z0."], ["admin", "t"], ["created_at", "2016-06-07 12:14:32.448952"], ["updated_at", "2016-06-07 12:14:32.448952"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:14:32.466776"], ["updated_at", "2016-06-07 12:14:32.466776"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.9ms)
  Rendered categories/new.html.erb within layouts/application (106.0ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (6.2ms)
  Rendered layouts/_messages.html.erb (0.8ms)
Completed 200 OK in 666ms (Views: 663.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$TpmM2QXLBf0MfQDaRM8ulujwUfINTR8d4ee67lTbL4/5dSeC7sDtG"], ["admin", "t"], ["created_at", "2016-06-07 12:14:33.151442"], ["updated_at", "2016-06-07 12:14:33.151442"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:14:33.154234"], ["updated_at", "2016-06-07 12:14:33.154234"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.5ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$/KJhWxYjY4HX.vp5JuRJBeovcmmioScyNT1dvPw9K0F3pce0ygkl6"], ["admin", "t"], ["created_at", "2016-06-07 12:14:33.172156"], ["updated_at", "2016-06-07 12:14:33.172156"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:14:33.176006"], ["updated_at", "2016-06-07 12:14:33.176006"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$KuxoHuGCJuEkQLv50Set/eiyQEcdhh9fnRioZ7Y4CXJ2imXaIOMlC"], ["admin", "t"], ["created_at", "2016-06-07 12:14:33.193412"], ["updated_at", "2016-06-07 12:14:33.193412"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:14:33.196019"], ["updated_at", "2016-06-07 12:14:33.196019"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (2.0ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "books"], ["created_at", "2016-06-07 12:14:33.211841"], ["updated_at", "2016-06-07 12:14:33.211841"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "programming"], ["created_at", "2016-06-07 12:14:33.214349"], ["updated_at", "2016-06-07 12:14:33.214349"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:14:33 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
SubsubcategoryTest: test_name_should_be_unique
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "subcategories" ("name", "category_id") VALUES (?, ?)  [["name", "Golf"], ["category_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
SubsubcategoryTest: test_name_should_be_present
-----------------------------------------------
  [1m[35mSubcategory Exists (0.5ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_long
----------------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_short
-----------------------------------------------------
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$n0770ZdGwvP5mZ0laTuSc.8eC/JWvmHZJPKG/ykYmnkAtIhZF37Ya"], ["created_at", "2016-06-07 12:14:33.299391"], ["updated_at", "2016-06-07 12:14:33.299391"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$0BQNQrgYxPHR5/q0Fo4iwuV20ttlPpyUKlJ8fuhLlpeAn2L7w9Loe"], ["created_at", "2016-06-07 12:14:33.306238"], ["updated_at", "2016-06-07 12:14:33.306238"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-07 12:14:33 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-07 12:14:33 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$gp5raazcpfZt4kDjd7GfBOSXrAXeHxrfUtv8dMXfnG6Iq2gISNO6G"], ["created_at", "2016-06-07 12:14:33.345651"], ["updated_at", "2016-06-07 12:14:33.345651"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-07 12:14:33 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.5ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:14:33.376052"], ["updated_at", "2016-06-07 12:14:33.376052"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$aufdZvCOcPtfCu4aYAjIheul246xHdXF/1TMUzkd9DIXx0DIyaDzK"], ["admin", "t"], ["created_at", "2016-06-07 12:14:33.387618"], ["updated_at", "2016-06-07 12:14:33.387618"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:14:33 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:14:33 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.2ms)
  Rendered categories/new.html.erb within layouts/application (7.5ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 15ms (Views: 13.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:14:33 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:14:33.447488"], ["updated_at", "2016-06-07 12:14:33.447488"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:14:33 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (0.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$nvziYSeJM7NjA42U5gzTQe5w0KEelCL5FbsXWdpmHI7dfuLXJD0Vm"], ["admin", "t"], ["created_at", "2016-06-07 12:14:33.468523"], ["updated_at", "2016-06-07 12:14:33.468523"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:14:33 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:14:33 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (4.2ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 14ms (Views: 11.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:14:33 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (3.3ms)
  Rendered categories/new.html.erb within layouts/application (7.0ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.9ms)
Completed 200 OK in 23ms (Views: 14.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------------
SubsubcategoriesControllerTest: test_should_get_subcategories_index
-------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------------
SubsubcategoriesControllerTest: test_should_get_subcategories_index
-------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------------
SubsubcategoriesControllerTest: test_should_get_subcategories_index
-------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (5.5ms)[0m  begin transaction
-------------------------------------------------------------------
SubsubcategoriesControllerTest: test_should_get_subcategories_index
-------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------------
SubsubcategoriesControllerTest: test_should_get_subcategories_index
-------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------------------
SubsubcategoriesControllerTest: test_should_get_subcategories_index
-------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (5.8ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (7.6ms)
  Rendered layouts/_messages.html.erb (0.9ms)
Completed 200 OK in 603ms (Views: 601.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (8.3ms)
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (11.8ms)
  Rendered layouts/_messages.html.erb (0.8ms)
Completed 200 OK in 508ms (Views: 507.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (5.4ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (7.5ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 526ms (Views: 525.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#new as HTML
Completed 500 Internal Server Error in 34ms (ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (3.6ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (7.0ms)
  Rendered layouts/_messages.html.erb (0.8ms)
Completed 200 OK in 518ms (Views: 517.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#new as HTML
  Rendered subcategories/new.html.erb within layouts/application (4.3ms)
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (8.8ms)
  Rendered layouts/_messages.html.erb (1.2ms)
Completed 200 OK in 467ms (Views: 465.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (15.7ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 22ms (Views: 21.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------
SubcategoriesControllerTest: test_should_get_show
-------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#show as HTML
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 37ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (3.5ms)
  [1m[36mCategory Load (0.4ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (6.4ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 504ms (Views: 503.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#new as HTML
  Rendered subcategories/new.html.erb within layouts/application (0.4ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.1ms)
  [1m[36m (4.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#new as HTML
  Rendered subcategories/new.html.erb within layouts/application (5.8ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (7.0ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 493ms (Views: 492.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------
SubcategoriesControllerTest: test_should_get_show
-------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered subcategories/show.html.erb within layouts/application (0.3ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 6.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (1.4ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (0.3ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (0.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$swTxncUN5AKjNZN43y4.yOiaEYj.BIUbSP.M9TKAUwWTLe2.h8l3a"], ["admin", "t"], ["created_at", "2016-06-07 12:40:50.982966"], ["updated_at", "2016-06-07 12:40:50.982966"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:40:50 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 33ms (ActiveRecord: 0.4ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:40:51 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (1.0ms)
  Rendered categories/new.html.erb within layouts/application (75.9ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 549ms (Views: 538.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:40:51 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:40:51.783576"], ["updated_at", "2016-06-07 12:40:51.783576"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:40:51 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (2.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Fn.dMUCGI1rTE7kFIvpG5OpxGX7w2kErrR32pm3WBZKWQH69r3zBq"], ["admin", "t"], ["created_at", "2016-06-07 12:40:51.806421"], ["updated_at", "2016-06-07 12:40:51.806421"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:40:51 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:40:51 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.0ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (4.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:40:51 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (2.8ms)
  Rendered categories/new.html.erb within layouts/application (5.5ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 18ms (Views: 10.8ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (0.3ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (5.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 12.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------
SubcategoriesControllerTest: test_should_get_show
-------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered subcategories/show.html.erb within layouts/application (0.4ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#new as HTML
  Rendered subcategories/new.html.erb within layouts/application (0.4ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$6BlYucUpeiS4cXTpTtlXU.rzVtoG2LukZrTNC0cxTSt.W1LRFtTKu"], ["created_at", "2016-06-07 12:40:51.975304"], ["updated_at", "2016-06-07 12:40:51.975304"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-07 12:40:51 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-07 12:40:52 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Lb8tdfERKFDTwybjDKVM3.zNJ3JblWvlk2RBUP5XrghIB7TTd1WWi"], ["created_at", "2016-06-07 12:40:52.019002"], ["updated_at", "2016-06-07 12:40:52.019002"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$FX7GnAcIAK7RuN19ZJRZQeEth915zrgy42CFu8r7RBlQmpewMrb16"], ["created_at", "2016-06-07 12:40:52.028809"], ["updated_at", "2016-06-07 12:40:52.028809"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-07 12:40:52 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:40:52.052025"], ["updated_at", "2016-06-07 12:40:52.052025"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-07 12:40:52 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 20ms (Views: 1.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (1.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:40:52.121429"], ["updated_at", "2016-06-07 12:40:52.121429"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-07 12:40:52 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:40:52.137897"], ["updated_at", "2016-06-07 12:40:52.137897"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:40:52.142038"], ["updated_at", "2016-06-07 12:40:52.142038"]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-07 12:40:52 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Bt.SVzDU266ZqOjGDHlWf.U5selgnpVc8XzoneOyybaRHaG456dya"], ["admin", "t"], ["created_at", "2016-06-07 12:40:52.175899"], ["updated_at", "2016-06-07 12:40:52.175899"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:40:52.180969"], ["updated_at", "2016-06-07 12:40:52.180969"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.3ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$epE9kAZ9Zst9ekpQhEurK.Gxj4S3k4DuPNRga/dkpA5fw5DoQbGoS"], ["admin", "t"], ["created_at", "2016-06-07 12:40:52.199729"], ["updated_at", "2016-06-07 12:40:52.199729"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:40:52.204473"], ["updated_at", "2016-06-07 12:40:52.204473"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$AyQA2tNivuFBfaq/7kgAfeB2k7P.KjMB2nq8SYI7k/3plvh9i4FzG"], ["admin", "t"], ["created_at", "2016-06-07 12:40:52.222905"], ["updated_at", "2016-06-07 12:40:52.222905"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:40:52.228103"], ["updated_at", "2016-06-07 12:40:52.228103"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (3.0ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 14ms (Views: 12.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (1.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$gzlum94LeO/V6DGa2xlO9eIdKqNx58DthvfRa60WGNpCoAdLTQyJ."], ["admin", "t"], ["created_at", "2016-06-07 12:40:52.257359"], ["updated_at", "2016-06-07 12:40:52.257359"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:40:52.261167"], ["updated_at", "2016-06-07 12:40:52.261167"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.6ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_long
----------------------------------------------------
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
SubsubcategoryTest: test_name_should_be_present
-----------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_short
-----------------------------------------------------
  [1m[35mSubcategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SubsubcategoryTest: test_name_should_be_unique
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subcategories" ("name", "category_id") VALUES (?, ?)[0m  [["name", "Golf"], ["category_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-07 12:40:52.301544"], ["updated_at", "2016-06-07 12:40:52.301544"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-07 12:40:52.305583"], ["updated_at", "2016-06-07 12:40:52.305583"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:40:52 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------
SubcategoriesControllerTest: test_should_get_show
-------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered subcategories/show.html.erb within layouts/application (3.7ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (10.2ms)
  Rendered layouts/_messages.html.erb (0.8ms)
Completed 200 OK in 569ms (Views: 568.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#new as HTML
  Rendered subcategories/new.html.erb within layouts/application (0.4ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (0.5ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (5.4ms)[0m  begin transaction
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$U8FyO3D5cL0jxmC.2BR93.DSBfSNpsVfCt4jXJRw.7TYBx3QZ6AJ2"], ["admin", "t"], ["created_at", "2016-06-07 12:43:05.389940"], ["updated_at", "2016-06-07 12:43:05.389940"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered subcategories/new.html.erb within layouts/application (3.9ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (8.5ms)
  Rendered layouts/_messages.html.erb (1.7ms)
Completed 200 OK in 562ms (Views: 536.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------
SubcategoriesControllerTest: test_should_get_show
-------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$ihdLWJPjLFF3cTMEnRAOUepNDPGzM5jemZ0Ltk8CzMjrguYyf8hcK"], ["admin", "t"], ["created_at", "2016-06-07 12:43:05.983076"], ["updated_at", "2016-06-07 12:43:05.983076"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered subcategories/show.html.erb within layouts/application (0.7ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$d2VopkIJM7TGKko6lOzgYeHF7.5aqTnZso0xEkB6Z.ngjhrVAw.Z6"], ["admin", "t"], ["created_at", "2016-06-07 12:43:06.001142"], ["updated_at", "2016-06-07 12:43:06.001142"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (0.4ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.1ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------
SubcategoriesControllerTest: test_should_redirect_create_when_admin_not_login
-----------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$MrHpfHIafyYmentWpF80z.GKiNCvIHpRuasHW4n1n1ltae4UDnd4G"], ["admin", "t"], ["created_at", "2016-06-07 12:43:06.018976"], ["updated_at", "2016-06-07 12:43:06.018976"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
Processing by SubcategoriesController#create as HTML
  Parameters: {"subcategory"=>{"name"=>"sports"}}
Redirected to http://test.host/subcategories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "subcategories"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$qfMrA2p6.2VMvvL6vTAY4u3v6VV2xw4mkZkOsX0joc/MM60Zd5O06"], ["created_at", "2016-06-07 12:43:34.261662"], ["updated_at", "2016-06-07 12:43:34.261662"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-07 12:43:34 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 41ms (Views: 0.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$MpcoggX1R0tnXPPpxhQWfOKhIPVzfdjuS/HoSNy9wbmn3k02qiRCq"], ["created_at", "2016-06-07 12:43:34.530937"], ["updated_at", "2016-06-07 12:43:34.530937"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$BoRQwE0G7AO9zSLCzJmA0uh224rElyEVnClJxV644OqUijTxoDJHS"], ["created_at", "2016-06-07 12:43:34.538368"], ["updated_at", "2016-06-07 12:43:34.538368"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-07 12:43:34 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-07 12:43:34 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------------------------
SubsubcategoryTest: test_name_should_be_unique
----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "subcategories" ("name", "category_id") VALUES (?, ?)  [["name", "Golf"], ["category_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_long
----------------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[35mSubcategory Exists (0.5ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
SubsubcategoryTest: test_name_should_be_present
-----------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_short
-----------------------------------------------------
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-07 12:43:34.622863"], ["updated_at", "2016-06-07 12:43:34.622863"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-07 12:43:34.627112"], ["updated_at", "2016-06-07 12:43:34.627112"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:43:34 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (6.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (6.4ms)
  Rendered layouts/_messages.html.erb (0.8ms)
Completed 200 OK in 477ms (Views: 475.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:43:35.132156"], ["updated_at", "2016-06-07 12:43:35.132156"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------
SubcategoriesControllerTest: test_should_get_show
-------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$233y7uZh9RXfEA8jIWAjRO1PNgyPrVxzA4xlgjiuTI6Ghpb1BMqwC"], ["admin", "t"], ["created_at", "2016-06-07 12:43:35.161022"], ["updated_at", "2016-06-07 12:43:35.161022"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered subcategories/show.html.erb within layouts/application (0.5ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$I5TJ6vluNTaOoVIK7lpIHeGPox1IQZ20cLP5BSwauIkKLFw.61pYu"], ["admin", "t"], ["created_at", "2016-06-07 12:43:35.199012"], ["updated_at", "2016-06-07 12:43:35.199012"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (0.5ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$AxHeeBew/BqdAxndAumxTe1eqO3lZo5AsDeuI.Z1MhDYXJB8TALde"], ["admin", "t"], ["created_at", "2016-06-07 12:43:35.220494"], ["updated_at", "2016-06-07 12:43:35.220494"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered subcategories/new.html.erb within layouts/application (0.6ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 46ms (Views: 44.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------
SubcategoriesControllerTest: test_should_redirect_create_when_admin_not_login
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$cWvtWzLIwuMIlTwbQWkG9OgkOqPnpvUBjllZsypR8W.s05O8.OihW"], ["admin", "t"], ["created_at", "2016-06-07 12:43:35.280331"], ["updated_at", "2016-06-07 12:43:35.280331"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "subcategories"
Processing by SubcategoriesController#create as HTML
  Parameters: {"subcategory"=>{"name"=>"sports"}}
Redirected to http://test.host/subcategories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$fuhQ8FIiuxZ91lyR//hVfuQsKUw2uILvUALxvHTf/sNh2BTz.2Aee"], ["admin", "t"], ["created_at", "2016-06-07 12:43:35.297896"], ["updated_at", "2016-06-07 12:43:35.297896"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:43:35.301193"], ["updated_at", "2016-06-07 12:43:35.301193"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.6ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$wId.8ehizw8222nj.XgptODJbPAWZRFGy.R0DIrW98apAjK8fcrfC"], ["admin", "t"], ["created_at", "2016-06-07 12:43:35.318610"], ["updated_at", "2016-06-07 12:43:35.318610"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:43:35.323037"], ["updated_at", "2016-06-07 12:43:35.323037"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$.1A1945l6D3Wny.26Iz6huDo4dlMT4oSetUZ1mU4EgRI0xAufq72W"], ["admin", "t"], ["created_at", "2016-06-07 12:43:35.338583"], ["updated_at", "2016-06-07 12:43:35.338583"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:43:35.342489"], ["updated_at", "2016-06-07 12:43:35.342489"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.2ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$3z/8rsvc0cumaNXFCt6mX.q/a/LOwZHX9pfukf0AJKZhzKrNRR8PW"], ["admin", "t"], ["created_at", "2016-06-07 12:43:35.357688"], ["updated_at", "2016-06-07 12:43:35.357688"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:43:35.360900"], ["updated_at", "2016-06-07 12:43:35.360900"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.6ms)
  Rendered categories/new.html.erb within layouts/application (34.2ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 39.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:43:35.442678"], ["updated_at", "2016-06-07 12:43:35.442678"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-07 12:43:35 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:43:35.470085"], ["updated_at", "2016-06-07 12:43:35.470085"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:43:35.476888"], ["updated_at", "2016-06-07 12:43:35.476888"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-07 12:43:35 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-07 12:43:35 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$C8Nc0XZmawbTmjREP0HdrOnsdJerw49oJXxFcafC1cdethmkFQOem"], ["admin", "t"], ["created_at", "2016-06-07 12:43:35.515961"], ["updated_at", "2016-06-07 12:43:35.515961"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:43:35 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:43:35 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (4.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 9.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:43:35 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:43:35.594208"], ["updated_at", "2016-06-07 12:43:35.594208"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 11ms (ActiveRecord: 0.9ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:43:35 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.5ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (3.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 7.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$mD7auGsrjGLEC1ivYguWleWSnBTXdOAvheG67Wz15nuKZH7571CTC"], ["admin", "t"], ["created_at", "2016-06-07 12:43:35.629919"], ["updated_at", "2016-06-07 12:43:35.629919"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:43:35 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:43:35 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (3.1ms)
  [1m[35mCategory Load (1.7ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 9.9ms | ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:43:35 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (1.7ms)
  Rendered categories/new.html.erb within layouts/application (5.0ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 17ms (Views: 10.9ms | ActiveRecord: 1.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-07 12:46:31 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 55ms (Views: 2.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (4.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$SaSHDRorc5FdU6Ty8zYxOuhok0gL5hI7s7YIEsTk4/AbxRJvT0HoG"], ["created_at", "2016-06-07 12:46:31.645355"], ["updated_at", "2016-06-07 12:46:31.645355"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-07 12:46:31 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 20ms (Views: 0.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Sl2z8E3VidpChG2wNDkByeQ/p3i6S1oTAWBl63H6qPn2vjpkRcKw."], ["created_at", "2016-06-07 12:46:31.683863"], ["updated_at", "2016-06-07 12:46:31.683863"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$rf1xFAM7rf5bmL4PH2F/2O6U6Gx91VQ/1Y2xYl2pxTIFrCkbb9c2e"], ["created_at", "2016-06-07 12:46:31.690119"], ["updated_at", "2016-06-07 12:46:31.690119"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-07 12:46:31 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------
CreateSubcategoriesTest: test_Get_new_subcategory_form_and_create_subcategory
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$pZq.kBFwNjV.LjCEgTxVyuQhEPCjY6uhMA.ZvyPWtKUVh2y.Rl77G"], ["admin", "t"], ["created_at", "2016-06-07 12:46:31.715299"], ["updated_at", "2016-06-07 12:46:31.715299"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:46:31 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/subcategories/new" for 127.0.0.1 at 2016-06-07 12:46:31 +0000
Processing by SubcategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered subcategories/new.html.erb within layouts/application (6.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (6.6ms)
  Rendered layouts/_messages.html.erb (1.0ms)
Completed 200 OK in 585ms (Views: 577.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
Started POST "/subcategories" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by SubcategoriesController#create as HTML
  Parameters: {"subcategory"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "sports"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/subcategories
Completed 302 Found in 14ms (ActiveRecord: 0.8ms)
Started GET "/subcategories" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (0.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------
CreateSubcategoriesTest: test_Invalid_subcategory_submission_results_in_failure
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$R8sS7p8MuQno.uRPKbEhMe0GYuraDTTnfUla5ZTCWydSB05n7pKQK"], ["admin", "t"], ["created_at", "2016-06-07 12:46:32.396547"], ["updated_at", "2016-06-07 12:46:32.396547"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/subcategories/new" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by SubcategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered subcategories/new.html.erb within layouts/application (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
Started POST "/subcategories" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by SubcategoriesController#create as HTML
  Parameters: {"subcategory"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered subcategories/new.html.erb within layouts/application (0.1ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 67ms (Views: 3.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
SubsubcategoryTest: test_name_should_be_present
-----------------------------------------------
  [1m[35mSubcategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_long
----------------------------------------------------
  [1m[36mSubcategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_short
-----------------------------------------------------
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[36mSubcategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
SubsubcategoryTest: test_name_should_be_unique
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "subcategories" ("name", "category_id") VALUES (?, ?)  [["name", "Golf"], ["category_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-07 12:46:32.526144"], ["updated_at", "2016-06-07 12:46:32.526144"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-07 12:46:32.529748"], ["updated_at", "2016-06-07 12:46:32.529748"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.4ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (9.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 27ms (Views: 24.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$MiI.mucRTfUTkACvpYK3/OsTIwWRs4w1G6eJTaaOmQWIEQAUb2CBC"], ["admin", "t"], ["created_at", "2016-06-07 12:46:32.599021"], ["updated_at", "2016-06-07 12:46:32.599021"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:46:32.602740"], ["updated_at", "2016-06-07 12:46:32.602740"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.4ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.2ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.6ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$/GyXIA1ek8UcjTcCv7DO9uJLeV.Ft6DD6MB9sQwPOuzIkRqTmK5DG"], ["admin", "t"], ["created_at", "2016-06-07 12:46:32.625014"], ["updated_at", "2016-06-07 12:46:32.625014"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:46:32.630940"], ["updated_at", "2016-06-07 12:46:32.630940"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$TXNo7hrYtUsrS3Dil6BsRObBjBiIEMKkv4e7uhVovwuXiIFfhG9Di"], ["admin", "t"], ["created_at", "2016-06-07 12:46:32.646987"], ["updated_at", "2016-06-07 12:46:32.646987"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:46:32.650856"], ["updated_at", "2016-06-07 12:46:32.650856"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.9ms)
  Rendered categories/new.html.erb within layouts/application (43.7ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 55ms (Views: 53.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$WpbpX.9My4Dl6xRnUwQIa.FR3yVUIwXwj03PDqHfpmNsO4faxa136"], ["admin", "t"], ["created_at", "2016-06-07 12:46:32.727933"], ["updated_at", "2016-06-07 12:46:32.727933"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:46:32.733261"], ["updated_at", "2016-06-07 12:46:32.733261"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (1.6ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 11.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.4ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 47ms (Views: 2.4ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:46:32.853776"], ["updated_at", "2016-06-07 12:46:32.853776"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 1.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:46:32.873563"], ["updated_at", "2016-06-07 12:46:32.873563"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:46:32.878004"], ["updated_at", "2016-06-07 12:46:32.878004"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 5ms (Views: 2.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$oyR2g4LA.mCKjqJFWF4MR.7fO32J0uCUUQ90g3IRYfbBKsbz5YgPq"], ["admin", "t"], ["created_at", "2016-06-07 12:46:32.906669"], ["updated_at", "2016-06-07 12:46:32.906669"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (3.2ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.8ms)
Completed 200 OK in 13ms (Views: 11.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:46:32.963069"], ["updated_at", "2016-06-07 12:46:32.963069"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 12ms (ActiveRecord: 0.9ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:46:32 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (2.3ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$MZig7g9X7kaujDBeVuA6ouqDq0s4W76KBpcJjGyi8GSYGyFGURXiC"], ["admin", "t"], ["created_at", "2016-06-07 12:46:32.996131"], ["updated_at", "2016-06-07 12:46:32.996131"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:46:33 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:46:33 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (4.7ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 11.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:46:33 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (3.2ms)
  Rendered categories/new.html.erb within layouts/application (7.4ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (3.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 27ms (Views: 17.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$EERpJx/aBd.pBQGhgsI8gOrvk4CUOgZA3QZt/6JVSnBw9Ni7qy1Zy"], ["admin", "t"], ["created_at", "2016-06-07 12:46:33.080537"], ["updated_at", "2016-06-07 12:46:33.080537"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered subcategories/new.html.erb within layouts/application (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------
SubcategoriesControllerTest: test_should_get_show
-------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$SythMfO9tVXptfLBgiNBP.6N.aX1wJXsgkhPDw59CTrO5j1Z9TBYW"], ["admin", "t"], ["created_at", "2016-06-07 12:46:33.103241"], ["updated_at", "2016-06-07 12:46:33.103241"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered subcategories/show.html.erb within layouts/application (0.5ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$tbBtX.Nzc.luMY0ZNYSIJeSYGC3fnRnO20FTLV1vYSR.JcOrdi.SC"], ["admin", "t"], ["created_at", "2016-06-07 12:46:33.139542"], ["updated_at", "2016-06-07 12:46:33.139542"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (0.3ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------
SubcategoriesControllerTest: test_should_redirect_create_when_admin_not_login
-----------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$WazXpaksyg0bIZa/rHLYl.xtFxUjgr8oUX/focvYI.b/hUt5S.QCC"], ["admin", "t"], ["created_at", "2016-06-07 12:46:33.163173"], ["updated_at", "2016-06-07 12:46:33.163173"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
Processing by SubcategoriesController#create as HTML
  Parameters: {"subcategory"=>{"name"=>"sports"}}
Redirected to http://test.host/subcategories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "subcategories"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:46:33.202391"], ["updated_at", "2016-06-07 12:46:33.202391"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:48:38.279688"], ["updated_at", "2016-06-07 12:48:38.279688"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:48:38.303477"], ["updated_at", "2016-06-07 12:48:38.303477"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-07 12:48:38 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 45ms (Views: 2.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-07 12:48:38 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.6ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:48:38.626582"], ["updated_at", "2016-06-07 12:48:38.626582"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-07 12:48:38 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.4ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 11ms (Views: 1.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$g9z4iMmBawVvbTmqSqL54uzWg.H9c39XE.BsS4k7A8A4oznayzX1G"], ["admin", "t"], ["created_at", "2016-06-07 12:48:38.768045"], ["updated_at", "2016-06-07 12:48:38.768045"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:48:38.786675"], ["updated_at", "2016-06-07 12:48:38.786675"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (4.7ms)
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (5.2ms)
  Rendered layouts/_messages.html.erb (4.3ms)
Completed 200 OK in 640ms (Views: 638.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$8KjxsUGT1.OjCPPdbasJUeNFeiPNfNid6DMzopaRmEE1q0dCNBDfm"], ["admin", "t"], ["created_at", "2016-06-07 12:48:39.459780"], ["updated_at", "2016-06-07 12:48:39.459780"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:48:39.466496"], ["updated_at", "2016-06-07 12:48:39.466496"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.9ms)
  Rendered categories/new.html.erb within layouts/application (56.6ms)
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 68ms (Views: 64.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Qn3n28Wtm08YVXn/qauEYuBoYyEyKOgRZvfmTwQ7biTJP/hUyRBcW"], ["admin", "t"], ["created_at", "2016-06-07 12:48:39.612668"], ["updated_at", "2016-06-07 12:48:39.612668"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:48:39.618013"], ["updated_at", "2016-06-07 12:48:39.618013"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (2.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 9.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$71nBrcin5sJBLjoGE0sg/OWgZayWQUYNzsRreSEY87BdAXXAZLh9S"], ["admin", "t"], ["created_at", "2016-06-07 12:48:39.641149"], ["updated_at", "2016-06-07 12:48:39.641149"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:48:39.645427"], ["updated_at", "2016-06-07 12:48:39.645427"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "books"], ["created_at", "2016-06-07 12:48:39.657451"], ["updated_at", "2016-06-07 12:48:39.657451"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "programming"], ["created_at", "2016-06-07 12:48:39.661231"], ["updated_at", "2016-06-07 12:48:39.661231"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:48:39 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Y/cS10UqlxGEdtT4zyDMoeEbxT5gefcJ38YKImKJBuA/Y9S1pVZ2u"], ["created_at", "2016-06-07 12:48:39.688860"], ["updated_at", "2016-06-07 12:48:39.688860"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-07 12:48:39 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$FqyUCV/zjwYBi2WKRXU9d.GV7umLrNWnSdsb3KWUKpITKktHgfeAa"], ["created_at", "2016-06-07 12:48:39.730870"], ["updated_at", "2016-06-07 12:48:39.730870"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$9iMLLBRb.LcwAKTaXu8PkO5Ij8JAnTV2xAn5da/Ow8lR8e65WT.Y."], ["created_at", "2016-06-07 12:48:39.740872"], ["updated_at", "2016-06-07 12:48:39.740872"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-07 12:48:39 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-07 12:48:39 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------------------------------------
CreateSubcategoriesTest: test_Get_new_subcategory_form_and_create_subcategory
-----------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$UchYKJra/ii1wbEVQ437a.Bu4X/FbiTOT.zYW3w6QDfK1IICQI/lW"], ["admin", "t"], ["created_at", "2016-06-07 12:48:39.778493"], ["updated_at", "2016-06-07 12:48:39.778493"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:48:39 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)
Started GET "/subcategories/new" for 127.0.0.1 at 2016-06-07 12:48:39 +0000
Processing by SubcategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered subcategories/new.html.erb within layouts/application (3.9ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 16.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "subcategories"
Started POST "/subcategories" for 127.0.0.1 at 2016-06-07 12:48:39 +0000
Processing by SubcategoriesController#create as HTML
  Parameters: {"subcategory"=>{"name"=>"Golf"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/subcategories
Completed 302 Found in 13ms (ActiveRecord: 1.5ms)
Started GET "/subcategories" for 127.0.0.1 at 2016-06-07 12:48:39 +0000
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (1.9ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (7.0ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 20ms (Views: 18.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "subcategories"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------
CreateSubcategoriesTest: test_Invalid_subcategory_submission_results_in_failure
-------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$rwQhsaFXW2Gf.iiSzWIY2uDSnxLKbZBIAV277GKiKJpepZLNbXzZ2"], ["admin", "t"], ["created_at", "2016-06-07 12:48:39.933850"], ["updated_at", "2016-06-07 12:48:39.933850"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:48:39 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/subcategories/new" for 127.0.0.1 at 2016-06-07 12:48:39 +0000
Processing by SubcategoriesController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered subcategories/new.html.erb within layouts/application (4.9ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (3.5ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 31ms (Views: 14.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "subcategories"
Started POST "/subcategories" for 127.0.0.1 at 2016-06-07 12:48:39 +0000
Processing by SubcategoriesController#create as HTML
  Parameters: {"subcategory"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (5.4ms)
  Rendered subcategories/new.html.erb within layouts/application (9.4ms)
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (23.2ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 49ms (Views: 38.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "subcategories"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------
SubcategoriesControllerTest: test_should_get_show
-------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$haQFy0YlnGsdlf/tVC.VH.6.a/Jt92/xsEIWLRlYIvutJ3ki8ongi"], ["admin", "t"], ["created_at", "2016-06-07 12:48:40.069576"], ["updated_at", "2016-06-07 12:48:40.069576"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered subcategories/show.html.erb within layouts/application (1.3ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$R5n9dI.GPE8e5QmhhY5mouX6BujBSPAnxl1ngO9b6ltOvVFExapCi"], ["admin", "t"], ["created_at", "2016-06-07 12:48:40.101914"], ["updated_at", "2016-06-07 12:48:40.101914"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.7ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$0x5tqmKKzbFuGZYDZJt6COl4u/TlYHHSDCCfW7IvGUeIZ9OGb3U6."], ["admin", "t"], ["created_at", "2016-06-07 12:48:40.125911"], ["updated_at", "2016-06-07 12:48:40.125911"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered subcategories/new.html.erb within layouts/application (2.7ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (4.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 9.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------
SubcategoriesControllerTest: test_should_redirect_create_when_admin_not_login
-----------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$FaNmOMM0irK5hqjuAit.MOKPUkXzpKozfc0krmzojZBdozcESHOYm"], ["admin", "t"], ["created_at", "2016-06-07 12:48:40.151369"], ["updated_at", "2016-06-07 12:48:40.151369"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
Processing by SubcategoriesController#create as HTML
  Parameters: {"subcategory"=>{"name"=>"sports"}}
Redirected to http://test.host/subcategories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "subcategories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.3ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:48:40.187851"], ["updated_at", "2016-06-07 12:48:40.187851"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_short
-----------------------------------------------------
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SubsubcategoryTest: test_name_should_be_unique
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "subcategories" ("name", "category_id") VALUES (?, ?)[0m  [["name", "Golf"], ["category_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
SubsubcategoryTest: test_name_should_be_present
-----------------------------------------------
  [1m[35mSubcategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_long
----------------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$wzzjwlBGpwpymt1UGIgLne7.0Lt96/CaNnp4oQjXBB3D/EgT22sy2"], ["admin", "t"], ["created_at", "2016-06-07 12:48:40.220188"], ["updated_at", "2016-06-07 12:48:40.220188"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:48:40 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:48:40 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.0ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:48:40 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:48:40.251848"], ["updated_at", "2016-06-07 12:48:40.251848"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:48:40 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/index.html.erb within layouts/application (1.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$wOeBPNAcwebtWVSwVYS1JOTUuigZlINJMDKtBOC10T1SnN4a4LPTK"], ["admin", "t"], ["created_at", "2016-06-07 12:48:40.276745"], ["updated_at", "2016-06-07 12:48:40.276745"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:48:40 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:48:40 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.6ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:48:40 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (2.5ms)
  Rendered categories/new.html.erb within layouts/application (5.3ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 19ms (Views: 11.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:51:05.612837"], ["updated_at", "2016-06-07 12:51:05.612837"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------
CreateSubcategoriesTest: test_Get_new_subcategory_form_and_create_subcategory
-----------------------------------------------------------------------------
  [1m[35m (2.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$3vXfP2uxsIzsGyFZaNCdJeorDJ4g/IKEOshDesl29cE1Paaz3VGNC"], ["admin", "t"], ["created_at", "2016-06-07 12:51:05.663330"], ["updated_at", "2016-06-07 12:51:05.663330"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:51:05 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 35ms (ActiveRecord: 0.3ms)
Started GET "/subcategories/new" for 127.0.0.1 at 2016-06-07 12:51:05 +0000
Processing by SubcategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (2.4ms)
  Rendered subcategories/new.html.erb within layouts/application (64.3ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (3.5ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 627ms (Views: 613.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
Started POST "/subcategories" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by SubcategoriesController#create as HTML
  Parameters: {"subcategory"=>{"name"=>"Golf", "category_id"=>"1"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "subcategories" ("name", "category_id") VALUES (?, ?)[0m  [["name", "Golf"], ["category_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/subcategories
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
Started GET "/subcategories" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (0.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------
CreateSubcategoriesTest: test_Invalid_subcategory_submission_results_in_failure
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$OaV9rDta2Gu2TokqF2zv6uSdfkd/DF1oz9qDE9JZu6Vaqrhl9qLii"], ["admin", "t"], ["created_at", "2016-06-07 12:51:06.569001"], ["updated_at", "2016-06-07 12:51:06.569001"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/subcategories/new" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by SubcategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered subcategories/new.html.erb within layouts/application (2.4ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
Started POST "/subcategories" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by SubcategoriesController#create as HTML
  Parameters: {"subcategory"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (46.3ms)
  Rendered subcategories/new.html.erb within layouts/application (48.7ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 58ms (Views: 53.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
SubcategoriesControllerTest: test_should_get_new
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$VocZ87RcRhAbyIiq2ILms..9dpv717EBWWfW0S.JVTry2b/O8Eke2"], ["admin", "t"], ["created_at", "2016-06-07 12:51:06.669098"], ["updated_at", "2016-06-07 12:51:06.669098"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered subcategories/new.html.erb within layouts/application (1.8ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------------
SubcategoriesControllerTest: test_should_get_show
-------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$klMbVasec7n5pkBXW8dx7ecHDnHp19Sp9MQgNx2wFARrOatkuxMwu"], ["admin", "t"], ["created_at", "2016-06-07 12:51:06.695341"], ["updated_at", "2016-06-07 12:51:06.695341"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by SubcategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered subcategories/show.html.erb within layouts/application (0.7ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.7ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
SubcategoriesControllerTest: test_should_get_subcategories_index
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$u6OnlOliJ0mO/S8zTxgr2.3nwRoNhkRa1z0shp1w7TWhYGtLXhQY6"], ["admin", "t"], ["created_at", "2016-06-07 12:51:06.716535"], ["updated_at", "2016-06-07 12:51:06.716535"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subcategories" ("name") VALUES (?)[0m  [["name", "Golf"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by SubcategoriesController#index as HTML
  Rendered subcategories/index.html.erb within layouts/application (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------
SubcategoriesControllerTest: test_should_redirect_create_when_admin_not_login
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$9WHqebskwKJJtBY6p9nDqevo3fByA.gypDPffGB72EYsAmlL63U/u"], ["admin", "t"], ["created_at", "2016-06-07 12:51:06.736673"], ["updated_at", "2016-06-07 12:51:06.736673"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "subcategories" ("name") VALUES (?)  [["name", "Golf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "subcategories"
Processing by SubcategoriesController#create as HTML
  Parameters: {"subcategory"=>{"name"=>"sports"}}
Redirected to http://test.host/subcategories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "subcategories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$yjzDT1KEq4XCwEMSzC6tbeiw7iMzLAktjXrGVieD5/zPCNpRUQabq"], ["admin", "t"], ["created_at", "2016-06-07 12:51:06.754132"], ["updated_at", "2016-06-07 12:51:06.754132"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.2ms)
  Rendered categories/new.html.erb within layouts/application (4.7ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 24ms (Views: 21.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:51:06.819201"], ["updated_at", "2016-06-07 12:51:06.819201"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 9ms (ActiveRecord: 2.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.5ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$83R907UWL8NN83.PHYIpCO/06gKPguwqJqCP9n32g0hpejozjPDYO"], ["admin", "t"], ["created_at", "2016-06-07 12:51:06.848050"], ["updated_at", "2016-06-07 12:51:06.848050"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (12.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 19ms (Views: 17.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-07 12:51:06 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (1.7ms)
  Rendered categories/new.html.erb within layouts/application (4.2ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 9.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$S98cZXa0FReK89juJsQ0EejFJVTcWvVo8ehREwpwKEf/IzuUzVxLO"], ["admin", "t"], ["created_at", "2016-06-07 12:51:06.922263"], ["updated_at", "2016-06-07 12:51:06.922263"]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:51:06.926941"], ["updated_at", "2016-06-07 12:51:06.926941"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.7ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$21dzGw9WvvAhR1K8RbUmc.uplFEV5RHKhhUSJoEkRLkOA7eSV9q2y"], ["admin", "t"], ["created_at", "2016-06-07 12:51:06.948118"], ["updated_at", "2016-06-07 12:51:06.948118"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 12:51:06.953237"], ["updated_at", "2016-06-07 12:51:06.953237"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (1.5ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.9ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$96JAqQOIwfUmg4KNOcb8veCO6IvSynhRrF3oRrGYrtJhUGYAeBWhi"], ["admin", "t"], ["created_at", "2016-06-07 12:51:06.974286"], ["updated_at", "2016-06-07 12:51:06.974286"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:51:06.978731"], ["updated_at", "2016-06-07 12:51:06.978731"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$7YsvBQnkdO1B.g2NPAOLsuPc17Xa8Pn1CLPAxMKV93FP9ysYD/tFm"], ["admin", "t"], ["created_at", "2016-06-07 12:51:06.996389"], ["updated_at", "2016-06-07 12:51:06.996389"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 12:51:07.000692"], ["updated_at", "2016-06-07 12:51:07.000692"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (3.2ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 8.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$GaEtw/lMt9p2QuYZc.Jx6u4J0WhVDMbW/iVhAAQYPtrKu03nujUqu"], ["created_at", "2016-06-07 12:51:07.023734"], ["updated_at", "2016-06-07 12:51:07.023734"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-07 12:51:07 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$3peyCyrem2CckB5wTUmG0eCAW9TlacgQI1wbFslX3BlRv2y0q9Ah."], ["created_at", "2016-06-07 12:51:07.065532"], ["updated_at", "2016-06-07 12:51:07.065532"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$iSG88fpyA/nN.g66teDKpeqSmjG9FYOUm9mvpdNBCQallSTyJmGOC"], ["created_at", "2016-06-07 12:51:07.073500"], ["updated_at", "2016-06-07 12:51:07.073500"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-07 12:51:07 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-07 12:51:07 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-07 12:51:07.100690"], ["updated_at", "2016-06-07 12:51:07.100690"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-07 12:51:07.104460"], ["updated_at", "2016-06-07 12:51:07.104460"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-07 12:51:07 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-07 12:51:07 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 16ms (Views: 1.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:51:07.165402"], ["updated_at", "2016-06-07 12:51:07.165402"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-07 12:51:07 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 0.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:51:07.183496"], ["updated_at", "2016-06-07 12:51:07.183496"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 12:51:07.187515"], ["updated_at", "2016-06-07 12:51:07.187515"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-07 12:51:07 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_short
-----------------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
SubsubcategoryTest: test_name_should_be_present
-----------------------------------------------
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
SubsubcategoryTest: test_name_should_be_unique
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "subcategories" ("name", "category_id") VALUES (?, ?)[0m  [["name", "Golf"], ["category_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------
SubsubcategoryTest: test_name_should_not_be_too_long
----------------------------------------------------
  [1m[35mSubcategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------
SubsubcategoryTest: test_subcategory_should_be_valid
----------------------------------------------------
  [1m[36mSubcategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subcategories" WHERE "subcategories"."name" = 'Golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (12.9ms)[0m  [1mCREATE TABLE "categories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime, "updated_at" datetime, "parent_id" integer) [0m
  [1m[35m (11.2ms)[0m  CREATE TABLE "merchandises" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" text, "price" integer, "amount" integer, "created_at" datetime, "updated_at" datetime, "user_id" integer) 
  [1m[36m (10.8ms)[0m  [1mCREATE TABLE "subcategories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "category_id" integer) [0m
  [1m[35m (17.2ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "username" varchar, "email" varchar, "mobile" varchar, "created_at" datetime, "updated_at" datetime, "password_digest" varchar, "admin" boolean DEFAULT 'f') 
  [1m[36m (11.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (242.9ms)[0m  select sqlite_version(*)
  [1m[36m (63.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (14.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160607133104')[0m
  [1m[35m (13.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160601133413')
  [1m[36m (9.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160601135919')[0m
  [1m[35m (10.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160528025621')
  [1m[36m (11.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160601134917')[0m
  [1m[35m (9.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160602023244')
  [1m[36m (14.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160606122427')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$mZyxDzM/rrxcJrKsQWfNAOyioOPGra/NqZmXSasd8cxrQVdHq5Maq"], ["admin", "t"], ["created_at", "2016-06-07 15:04:58.299457"], ["updated_at", "2016-06-07 15:04:58.299457"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-07 15:04:58 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 42ms (ActiveRecord: 0.8ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 15:04:58 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.9ms)
  Rendered categories/new.html.erb within layouts/application (79.2ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (3.7ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 605ms (Views: 574.2ms | ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (5.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 15:04:59.223390"], ["updated_at", "2016-06-07 15:04:59.223390"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 15ms (ActiveRecord: 5.9ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered categories/index.html.erb within layouts/application (1.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 7.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$k8sSEx/h7NhlYxQokt.aQ.ppaKUii5LXeTNpizdMEkIAODBUxVBy2"], ["admin", "t"], ["created_at", "2016-06-07 15:04:59.255649"], ["updated_at", "2016-06-07 15:04:59.255649"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (1.9ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (1.8ms)
  Rendered categories/new.html.erb within layouts/application (3.6ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 6.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$bcqvb5kTCwOzSJ7Ak0MnH.23GTST8uz9tTR2sDzKP4Vad.7vLcooS"], ["created_at", "2016-06-07 15:04:59.333642"], ["updated_at", "2016-06-07 15:04:59.333642"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$ZTyOYJ6LOeFPamD5m4n.k.cGyfcOf81qOjpaYhzXVFcKn8MlpBMPi"], ["created_at", "2016-06-07 15:04:59.358765"], ["updated_at", "2016-06-07 15:04:59.358765"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$OpV2qnuJU4Qp6ZAqTkqkF.WeUPBOLfeulKjExFBDg2Gl8ojDGNfMW"], ["created_at", "2016-06-07 15:04:59.365686"], ["updated_at", "2016-06-07 15:04:59.365686"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 15:04:59.384201"], ["updated_at", "2016-06-07 15:04:59.384201"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$R2WPnYMRGJPiKHXYz8C0cer3ge.yy0Hd82cfGZ1J62b6.ADKYueeu"], ["admin", "t"], ["created_at", "2016-06-07 15:04:59.402964"], ["updated_at", "2016-06-07 15:04:59.402964"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 15:04:59.407609"], ["updated_at", "2016-06-07 15:04:59.407609"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  Rendered categories/new.html.erb within layouts/application (2.3ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Xd5qAJt84I1rVLxWgbsFpOd1KiiyNOJ5KYcfnV6sTFhjXTwR5o3bK"], ["admin", "t"], ["created_at", "2016-06-07 15:04:59.437655"], ["updated_at", "2016-06-07 15:04:59.437655"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 15:04:59.442410"], ["updated_at", "2016-06-07 15:04:59.442410"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered categories/index.html.erb within layouts/application (1.0ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered layouts/_navigation.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$dTNo95L55GlRMxxUaYpH2.anfgt.eXtzy/Mz2R/Wbv6gNjNtFVN1u"], ["admin", "t"], ["created_at", "2016-06-07 15:04:59.458974"], ["updated_at", "2016-06-07 15:04:59.458974"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-07 15:04:59.462343"], ["updated_at", "2016-06-07 15:04:59.462343"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  Rendered categories/show.html.erb within layouts/application (0.5ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$C0vZ2EzaFeDYPR9fU2Spuuvo1MLJxrqNd5UvAcbq9DvMKLIa6GVVK"], ["admin", "t"], ["created_at", "2016-06-07 15:04:59.479486"], ["updated_at", "2016-06-07 15:04:59.479486"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-07 15:04:59.484213"], ["updated_at", "2016-06-07 15:04:59.484213"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "books"], ["created_at", "2016-06-07 15:04:59.496918"], ["updated_at", "2016-06-07 15:04:59.496918"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "programming"], ["created_at", "2016-06-07 15:04:59.501123"], ["updated_at", "2016-06-07 15:04:59.501123"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.5ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered categories/index.html.erb within layouts/application (1.9ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 15:04:59.542125"], ["updated_at", "2016-06-07 15:04:59.542125"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 15:04:59.549089"], ["updated_at", "2016-06-07 15:04:59.549089"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-07 15:04:59.590507"], ["updated_at", "2016-06-07 15:04:59.590507"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-07 15:04:59 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-08 02:08:06.859096"], ["updated_at", "2016-06-08 02:08:06.859096"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-08 02:08:06.862897"], ["updated_at", "2016-06-08 02:08:06.862897"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:08:07 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (51.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 422ms (Views: 392.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:08:07.507428"], ["updated_at", "2016-06-08 02:08:07.507428"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$KbDqcJ9/gwGrU04BQ4IVVOL2rcNTVO9cyrUX51O49U7XUKgxjaAWq"], ["created_at", "2016-06-08 02:08:07.627063"], ["updated_at", "2016-06-08 02:08:07.627063"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:08:07 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$qKVWnXrcpPREshewjz.HY.tfOFsIEdlTmBIxC25xxCQ10j.yKKHyS"], ["created_at", "2016-06-08 02:08:07.661784"], ["updated_at", "2016-06-08 02:08:07.661784"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$o676mKGut/PZ5iRi/x1.zuYHrVkRNJgMAagILHZamV4m6ueDoEaqG"], ["created_at", "2016-06-08 02:08:07.670551"], ["updated_at", "2016-06-08 02:08:07.670551"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:08:07 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:08:07 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$D0qn2bDzQ0xHxm5tCeEEt.fQR6z8VAm7crWv.gyVmlRe78Eyzo4gi"], ["admin", "t"], ["created_at", "2016-06-08 02:08:07.691268"], ["updated_at", "2016-06-08 02:08:07.691268"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:08:07.694844"], ["updated_at", "2016-06-08 02:08:07.694844"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (1.8ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoriesControllerTest: test_should_get_show
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$1ZY2NvFFxIEf850s0ClFbusYL5ZxVKK58yuKXN09WyhZ6ooU4JMiy"], ["admin", "t"], ["created_at", "2016-06-08 02:08:07.716093"], ["updated_at", "2016-06-08 02:08:07.716093"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:08:07.719178"], ["updated_at", "2016-06-08 02:08:07.719178"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mCategory Load (0.1ms)[0m  SELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (0.6ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Snwpluh5mdgWvddcPsYWE.M5tGmgsET82WlBJQsf352mUTjKAC4FW"], ["admin", "t"], ["created_at", "2016-06-08 02:08:07.735705"], ["updated_at", "2016-06-08 02:08:07.735705"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:08:07.739049"], ["updated_at", "2016-06-08 02:08:07.739049"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.6ms)
  [1m[35mCategory Load (1.5ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (38.6ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (4.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 53ms (Views: 50.5ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$2efE9EPAJAu4JMrGD6uJW.msO9wFhyTqYloq.LHhl9OFPCOFCEn6i"], ["admin", "t"], ["created_at", "2016-06-08 02:08:07.804346"], ["updated_at", "2016-06-08 02:08:07.804346"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:08:07.809419"], ["updated_at", "2016-06-08 02:08:07.809419"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:08:07 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.4ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 12ms (Views: 1.5ms | ActiveRecord: 1.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:08:07.883002"], ["updated_at", "2016-06-08 02:08:07.883002"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:08:07.889069"], ["updated_at", "2016-06-08 02:08:07.889069"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:08:07 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:08:07.906763"], ["updated_at", "2016-06-08 02:08:07.906763"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:08:07 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$zuo/phyhn44fr7s/OMy7OeKo31SHDO/zoksvi4sTVzUAYS3RX.jQO"], ["admin", "t"], ["created_at", "2016-06-08 02:08:07.934151"], ["updated_at", "2016-06-08 02:08:07.934151"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:08:07 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:08:07 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (7.9ms)
  [1m[36mCategory Load (1.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 21ms (Views: 15.4ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:08:07 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:08:08.008994"], ["updated_at", "2016-06-08 02:08:08.008994"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 11ms (ActiveRecord: 1.0ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:08:08 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (4.2ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.4ms)
  Rendered layouts/_messages.html.erb (1.0ms)
Completed 200 OK in 14ms (Views: 12.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$s2j1hf5hRXyHZXWEaJRbYenGZH.4WtVFn5PFRqi5GMy/etGormX6G"], ["admin", "t"], ["created_at", "2016-06-08 02:08:08.047100"], ["updated_at", "2016-06-08 02:08:08.047100"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:08:08 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:08:08 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (1.0ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (4.7ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.5ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 10.3ms | ActiveRecord: 1.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:08:08 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (1.9ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (5.1ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 14ms (Views: 8.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:20:22.003783"], ["updated_at", "2016-06-08 02:20:22.003783"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Q93GdWRxAgn4WTc9PPcRzuBq4xF9t.G8cZY3hh0Xbb0zkbnWNrCby"], ["created_at", "2016-06-08 02:22:23.767079"], ["updated_at", "2016-06-08 02:22:23.767079"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:22:23 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 44ms (Views: 1.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:22:24 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$RtUffkWqNklKmZ4faQ3PRuv1B2EqmiA6vEq7h/Jxny.TS2QpCgs86"], ["created_at", "2016-06-08 02:22:24.080065"], ["updated_at", "2016-06-08 02:22:24.080065"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$e/DtqdAwbgSIogKsuJrdquh3aUzGg4gEv.rMgB5bTpnGuiGf.w6le"], ["created_at", "2016-06-08 02:22:24.087956"], ["updated_at", "2016-06-08 02:22:24.087956"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:22:24 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:22:24.134090"], ["updated_at", "2016-06-08 02:22:24.134090"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:22:24 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 22ms (Views: 1.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:22:24 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.6ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:22:24.191857"], ["updated_at", "2016-06-08 02:22:24.191857"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:22:24.196069"], ["updated_at", "2016-06-08 02:22:24.196069"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:22:24 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (1.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$MJ.ze7XcyUg6hBUTFZZTNOXQXnIPQrhnndi6NjV3jy.Ubin.NUQbG"], ["admin", "t"], ["created_at", "2016-06-08 02:22:24.228651"], ["updated_at", "2016-06-08 02:22:24.228651"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:22:24.250030"], ["updated_at", "2016-06-08 02:22:24.250030"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:22:24.253353"], ["updated_at", "2016-06-08 02:22:24.253353"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (38.9ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (5.5ms)
  Rendered layouts/_messages.html.erb (1.1ms)
Completed 200 OK in 536ms (Views: 534.5ms | ActiveRecord: 0.9ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$FZ/wIbKgwesnAYreeQEZ6e1YxMY29WrqwLF/KpqM.TNM0tkNIktsy"], ["admin", "t"], ["created_at", "2016-06-08 02:22:24.808145"], ["updated_at", "2016-06-08 02:22:24.808145"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:22:24.814609"], ["updated_at", "2016-06-08 02:22:24.814609"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:22:24.819064"], ["updated_at", "2016-06-08 02:22:24.819064"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (3.1ms)
  [1m[35mCategory Load (0.4ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 10.6ms | ActiveRecord: 1.1ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$DnCA6LZiWr3lKF2qg1/LP.z2kKyMdt2uNDrfWIGFraKl2sB.1MH1C"], ["admin", "t"], ["created_at", "2016-06-08 02:22:24.851445"], ["updated_at", "2016-06-08 02:22:24.851445"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:22:24.856905"], ["updated_at", "2016-06-08 02:22:24.856905"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:22:24.860041"], ["updated_at", "2016-06-08 02:22:24.860041"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Lev7T0lFTOGJRWYLoNVrbew1x14yj.r1tYPf9OljNqBtRAeboQ9NC"], ["admin", "t"], ["created_at", "2016-06-08 02:22:24.878882"], ["updated_at", "2016-06-08 02:22:24.878882"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:22:24.883966"], ["updated_at", "2016-06-08 02:22:24.883966"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:22:24.888576"], ["updated_at", "2016-06-08 02:22:24.888576"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (0.8ms)
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$22XKaiQfqrlamkqNHB6Iyul9AJMG0VCnB.sypmaaHu7YaRbIkDCfm"], ["admin", "t"], ["created_at", "2016-06-08 02:22:24.909080"], ["updated_at", "2016-06-08 02:22:24.909080"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:22:24.913944"], ["updated_at", "2016-06-08 02:22:24.913944"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:22:24.919428"], ["updated_at", "2016-06-08 02:22:24.919428"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.6ms)
  [1m[36mCategory Load (1.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (69.0ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 79ms (Views: 76.5ms | ActiveRecord: 1.5ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-08 02:22:25.009513"], ["updated_at", "2016-06-08 02:22:25.009513"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-08 02:22:25.015735"], ["updated_at", "2016-06-08 02:22:25.015735"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:22:25 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (6.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 15ms (Views: 14.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$F./vxAcwmz0i9I49lFhtpu0KihffllVqzt46ZLhsFCP2KMFVSEXcS"], ["admin", "t"], ["created_at", "2016-06-08 02:22:25.061186"], ["updated_at", "2016-06-08 02:22:25.061186"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:22:25 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:22:25 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (8.2ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 13.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:22:25 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (4.8ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (9.4ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 29ms (Views: 16.3ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$ZCrQBLHVblVWkiNoqAmDpumYsgnUz61X9a4i5yDBBibh/XkIT4eQe"], ["admin", "t"], ["created_at", "2016-06-08 02:22:25.184148"], ["updated_at", "2016-06-08 02:22:25.184148"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:22:25 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:22:25 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.3ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (6.7ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 17ms (Views: 13.4ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:22:25 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:22:25.240878"], ["updated_at", "2016-06-08 02:22:25.240878"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 10ms (ActiveRecord: 1.3ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:22:25 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (3.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (4.6ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 18ms (Views: 15.4ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:22:25.293735"], ["updated_at", "2016-06-08 02:22:25.293735"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:23:56.024015"], ["updated_at", "2016-06-08 02:23:56.024015"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$BwT2l8ly1CBgNATgu5Ry6OqSQpeFyGrOC6jl1rrC8vJQ632RYTvNG"], ["created_at", "2016-06-08 02:23:56.081531"], ["updated_at", "2016-06-08 02:23:56.081531"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:23:56 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 59ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:23:56 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$FcRn6B/egVDNYN2eCTP21emf3oXvN7QWIYnF2sIX8dO2XFCLg52VW"], ["created_at", "2016-06-08 02:23:56.358270"], ["updated_at", "2016-06-08 02:23:56.358270"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$0ex28olNjkttnFoGS32vh.U4WcBGQbLj.2edJBJQM3h4jPPiWnJuW"], ["created_at", "2016-06-08 02:23:56.364443"], ["updated_at", "2016-06-08 02:23:56.364443"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:23:56 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$tvtXxBTwBm818DfpNNkbPOV.j2k3NSUmvOEMjyWL5s0cRbpMwqOOO"], ["admin", "t"], ["created_at", "2016-06-08 02:23:56.380198"], ["updated_at", "2016-06-08 02:23:56.380198"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:23:56 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:23:56 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.8ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (73.7ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.5ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 520ms (Views: 515.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:23:56 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:23:56.962650"], ["updated_at", "2016-06-08 02:23:56.962650"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:23:56 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered categories/index.html.erb within layouts/application (2.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.4ms)
Completed 200 OK in 9ms (Views: 7.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$ezafK1Rw9fD2p4G1OvMAmuNulh9gS3Glcl1cmu4vltSzLhWLWltUO"], ["admin", "t"], ["created_at", "2016-06-08 02:23:56.985667"], ["updated_at", "2016-06-08 02:23:56.985667"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:23:56 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:23:56 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.3ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:23:57 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:23:57.014398"], ["updated_at", "2016-06-08 02:23:57.014398"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 5ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:23:57 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (28.0ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 34.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Vwtka0lRh/So/7mjaHPvm.IZle/7bk0WWYD4TDiVH15MGYXdFqaQ6"], ["admin", "t"], ["created_at", "2016-06-08 02:23:57.064736"], ["updated_at", "2016-06-08 02:23:57.064736"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:23:57 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:23:57 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (2.5ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:23:57 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (1.5ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.5ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 6.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$e7ZNQHTCgECnQ682Z2ZnxeqGgNfw4Hu4XtSE8aHrFOBWM0ExTgRxy"], ["admin", "t"], ["created_at", "2016-06-08 02:23:57.105685"], ["updated_at", "2016-06-08 02:23:57.105685"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:23:57.108475"], ["updated_at", "2016-06-08 02:23:57.108475"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:23:57.110678"], ["updated_at", "2016-06-08 02:23:57.110678"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (1.8ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$z9MfDNhP40EC0J28Zau0jOvem/QQdhrXgcNtjy9ak.T6AXOgDDQAW"], ["admin", "t"], ["created_at", "2016-06-08 02:23:57.127363"], ["updated_at", "2016-06-08 02:23:57.127363"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:23:57.131420"], ["updated_at", "2016-06-08 02:23:57.131420"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:23:57.133691"], ["updated_at", "2016-06-08 02:23:57.133691"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (2.6ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$bswqslaKW308kLfI92iCQeR3kdhtAO6Ur3mtio8jIadEIos5XoSMW"], ["admin", "t"], ["created_at", "2016-06-08 02:23:57.147681"], ["updated_at", "2016-06-08 02:23:57.147681"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:23:57.150215"], ["updated_at", "2016-06-08 02:23:57.150215"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:23:57.152676"], ["updated_at", "2016-06-08 02:23:57.152676"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  [1m[36mCategory Load (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (1.2ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 3.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$nmTm41Tf665uZxzV7tXqTelDr5whtbXOcqh.n9wMg5uP1Dpdy8Zjy"], ["admin", "t"], ["created_at", "2016-06-08 02:23:57.165724"], ["updated_at", "2016-06-08 02:23:57.165724"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:23:57.168625"], ["updated_at", "2016-06-08 02:23:57.168625"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:23:57.171112"], ["updated_at", "2016-06-08 02:23:57.171112"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (0.5ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$YcApbNMWIn/EifL87.ux1egLNkVDQjD9720MFImcesXGkO32zeBDC"], ["admin", "t"], ["created_at", "2016-06-08 02:23:57.183139"], ["updated_at", "2016-06-08 02:23:57.183139"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:23:57.186034"], ["updated_at", "2016-06-08 02:23:57.186034"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:23:57.188519"], ["updated_at", "2016-06-08 02:23:57.188519"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:23:57 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 6ms (Views: 1.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:23:57.238790"], ["updated_at", "2016-06-08 02:23:57.238790"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:23:57 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:23:57.251740"], ["updated_at", "2016-06-08 02:23:57.251740"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:23:57.253961"], ["updated_at", "2016-06-08 02:23:57.253961"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:23:57 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "books"], ["created_at", "2016-06-08 02:23:57.263977"], ["updated_at", "2016-06-08 02:23:57.263977"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "programming"], ["created_at", "2016-06-08 02:23:57.266413"], ["updated_at", "2016-06-08 02:23:57.266413"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:23:57 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  [1m[35mCategory Load (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (2.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-08 02:26:55.484100"], ["updated_at", "2016-06-08 02:26:55.484100"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-08 02:26:55.489871"], ["updated_at", "2016-06-08 02:26:55.489871"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:26:55 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  [1m[36mCategory Load (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (48.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (5.9ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 390ms (Views: 361.8ms | ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 7ms (Views: 1.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:26:56.152474"], ["updated_at", "2016-06-08 02:26:56.152474"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:26:56.164719"], ["updated_at", "2016-06-08 02:26:56.164719"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:26:56.167337"], ["updated_at", "2016-06-08 02:26:56.167337"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:26:56.189703"], ["updated_at", "2016-06-08 02:26:56.189703"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 0.4ms)
  [1m[35m (2.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$vKy5bas.jQdA5cV3BTLheOwFDyrbcUwcHvM9ABaRbS09Q0VU3MS.2"], ["created_at", "2016-06-08 02:26:56.241628"], ["updated_at", "2016-06-08 02:26:56.241628"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$useqEkwXPRcBLEKAQC6yfOHFCWTTvaQ8dSAzUcn06W91n8kDdi/wq"], ["created_at", "2016-06-08 02:26:56.256720"], ["updated_at", "2016-06-08 02:26:56.256720"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$g/OMp1MbzTv0ERrBKyUJs.WJk7Cab9tH68QXbfkyh6R8lLHmzdyzC"], ["created_at", "2016-06-08 02:26:56.262856"], ["updated_at", "2016-06-08 02:26:56.262856"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$HfLfu1F8Vkb4OGlt/.3Z.eTRJIFLW792RMxcO96E0.44Pkd2ARBni"], ["admin", "t"], ["created_at", "2016-06-08 02:26:56.278867"], ["updated_at", "2016-06-08 02:26:56.278867"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:26:56.281892"], ["updated_at", "2016-06-08 02:26:56.281892"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:26:56.284401"], ["updated_at", "2016-06-08 02:26:56.284401"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (1.6ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (49.3ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (16.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 74ms (Views: 72.5ms | ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$3AS0v4HK.28QrlfR8JEM9ein5A5tFYr/S2n2NeqD5sWMkoS9X3mLq"], ["admin", "t"], ["created_at", "2016-06-08 02:26:56.372588"], ["updated_at", "2016-06-08 02:26:56.372588"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:26:56.376491"], ["updated_at", "2016-06-08 02:26:56.376491"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:26:56.379786"], ["updated_at", "2016-06-08 02:26:56.379786"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$l5Xfgoaq01YJY.zUQR5BWuxyml3eCTF5rhUArseo75w3d9u/9A6E2"], ["admin", "t"], ["created_at", "2016-06-08 02:26:56.394135"], ["updated_at", "2016-06-08 02:26:56.394135"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:26:56.397896"], ["updated_at", "2016-06-08 02:26:56.397896"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:26:56.401429"], ["updated_at", "2016-06-08 02:26:56.401429"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (2.6ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Xvx5g5E2lSaFuRqdFREHauKUVipCkKpxOE.K3sst8Uss1dTwuubUe"], ["admin", "t"], ["created_at", "2016-06-08 02:26:56.420585"], ["updated_at", "2016-06-08 02:26:56.420585"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:26:56.424606"], ["updated_at", "2016-06-08 02:26:56.424606"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:26:56.427745"], ["updated_at", "2016-06-08 02:26:56.427745"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mCategory Load (0.1ms)[0m  SELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (1.9ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 6.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$4HGvz7L.Xgn167YrzyrCYexEGDtKMDQi/czWh6hsEOOcj9h4qWYGC"], ["admin", "t"], ["created_at", "2016-06-08 02:26:56.446277"], ["updated_at", "2016-06-08 02:26:56.446277"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:26:56.450209"], ["updated_at", "2016-06-08 02:26:56.450209"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:26:56.454336"], ["updated_at", "2016-06-08 02:26:56.454336"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mCategory Load (0.1ms)[0m  SELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (0.5ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 0.3ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$DpXMtV11.1xLbVcm4IokhewD7HigBzGC06IYxCXYT81lRnHkl7vIW"], ["admin", "t"], ["created_at", "2016-06-08 02:26:56.474510"], ["updated_at", "2016-06-08 02:26:56.474510"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (7.1ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 11.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:26:56.527688"], ["updated_at", "2016-06-08 02:26:56.527688"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.6ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (2.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$/zS7WZLzn7obMS0rIguvDerJ0phL9rEu5MAOeDzN8fe4H62IMU3Wu"], ["admin", "t"], ["created_at", "2016-06-08 02:26:56.551374"], ["updated_at", "2016-06-08 02:26:56.551374"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (2.8ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (1.8ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (5.0ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 8.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$.tmlB8Qd.zYLYh8sNrY4qutoQ6aXa8Eyw38bwl2nL5nnZeSov87I."], ["admin", "t"], ["created_at", "2016-06-08 02:26:56.597059"], ["updated_at", "2016-06-08 02:26:56.597059"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.0ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.4ms)
Completed 200 OK in 8ms (Views: 6.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:26:56.622392"], ["updated_at", "2016-06-08 02:26:56.622392"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 5ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:26:56 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered categories/index.html.erb within layouts/application (0.5ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (1.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$UgAjQlp4tavn7EBtg.LgM.3qAaWWCxQz99Iw6ZjLRqg12EHzgMtrm"], ["admin", "t"], ["created_at", "2016-06-08 02:28:18.414481"], ["updated_at", "2016-06-08 02:28:18.414481"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:28:18 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 30ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:28:18 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.7ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (77.8ms)
  [1m[35mCategory Load (1.6ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (4.8ms)
  Rendered layouts/_messages.html.erb (0.8ms)
Completed 200 OK in 502ms (Views: 481.6ms | ActiveRecord: 2.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:28:19 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:28:19.184486"], ["updated_at", "2016-06-08 02:28:19.184486"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 8ms (ActiveRecord: 1.2ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:28:19 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.4ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (24.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 32ms (Views: 31.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$yNwMl.V1SaXT83VLrDMLLuXu1FYYHcy0AXFIxxP2Bek/nz7IzuoIC"], ["admin", "t"], ["created_at", "2016-06-08 02:28:19.236751"], ["updated_at", "2016-06-08 02:28:19.236751"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:28:19 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:28:19 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.0ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 38ms (Views: 6.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:28:19 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (1.7ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (4.2ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 12ms (Views: 7.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$R.Vkr9Flotp9EIy36jKtMeXwcc5mLK4TqDaVthNuhDiUO5egqq9LS"], ["admin", "t"], ["created_at", "2016-06-08 02:28:19.314629"], ["updated_at", "2016-06-08 02:28:19.314629"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:28:19 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:28:19 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (2.8ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:28:19 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:28:19.338824"], ["updated_at", "2016-06-08 02:28:19.338824"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 5ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:28:19 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered categories/index.html.erb within layouts/application (0.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$kPA8x19svFFxfiX.Rzv4YuMYJSVSxZzUwT4BCBRqRL.DOTXn/HD4S"], ["admin", "t"], ["created_at", "2016-06-08 02:29:27.707241"], ["updated_at", "2016-06-08 02:29:27.707241"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:29:27 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 35ms (ActiveRecord: 0.5ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:29:27 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (2.8ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (80.5ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.0ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 404ms (Views: 376.8ms | ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:29:28 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (2.5ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (5.2ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 15ms (Views: 8.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$XxarDzDPuk9lLrDh2AfvYOTETpgOhCMtvYj6TrTCBmRq656DYKo0W"], ["admin", "t"], ["created_at", "2016-06-08 02:29:28.386532"], ["updated_at", "2016-06-08 02:29:28.386532"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:29:28 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:29:28 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (3.0ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:29:28 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:29:28.414458"], ["updated_at", "2016-06-08 02:29:28.414458"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 6ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:29:28 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (25.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 33ms (Views: 30.1ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$XWlaA9u5mgD09.79/aW60eOg0thunZfeupSvmw6HZ6iwLg4FwK9r6"], ["admin", "t"], ["created_at", "2016-06-08 02:29:28.463911"], ["updated_at", "2016-06-08 02:29:28.463911"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:29:28 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:29:28 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (4.6ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 9.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:29:28 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:29:28.513895"], ["updated_at", "2016-06-08 02:29:28.513895"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 6ms (ActiveRecord: 0.6ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:29:28 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (2.3ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.3ms)
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:29:28 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.6ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:29:28.534133"], ["updated_at", "2016-06-08 02:29:28.534133"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 5ms (ActiveRecord: 1.4ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:29:28 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (2.1ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 7.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$RwSX8QW5ooZ9IRu7gtH1Pek9L4PeLL.dAIC52WxI6hYmWHtBK/Bkq"], ["admin", "t"], ["created_at", "2016-06-08 02:44:08.467157"], ["updated_at", "2016-06-08 02:44:08.467157"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:44:08 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 36ms (ActiveRecord: 0.4ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:44:08 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (1.0ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (93.8ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (5.3ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 478ms (Views: 452.7ms | ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:44:09 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (0.7ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.3ms)
  [1m[36mCategory Load (0.9ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 15ms (Views: 6.9ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$bOEgbT7g0qVPyj5nBMNLyOz7kd0wloHv6zHQUT/.zfeYdmumYlHUu"], ["admin", "t"], ["created_at", "2016-06-08 02:44:09.282489"], ["updated_at", "2016-06-08 02:44:09.282489"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:44:09 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:44:09 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (3.0ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:44:09 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (0.7ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.1ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 6.7ms | ActiveRecord: 0.5ms)
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:44:09 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (1.0ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.5ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 6.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$NQ67FqkfarCfxe1fTQuqLu3UltlJMh3jZgacrOX/8TPJQ9zo18zcy"], ["admin", "t"], ["created_at", "2016-06-08 02:44:09.337268"], ["updated_at", "2016-06-08 02:44:09.337268"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:44:09 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:44:09 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (5.3ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 14ms (Views: 11.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:44:09 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (4.5ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (10.0ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.9ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 25ms (Views: 16.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:45:12.491746"], ["updated_at", "2016-06-08 02:45:12.491746"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:45:12 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 48ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:45:12 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:45:12.818360"], ["updated_at", "2016-06-08 02:45:12.818360"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:45:12.822324"], ["updated_at", "2016-06-08 02:45:12.822324"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:45:12 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:45:12 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered categories/index.html.erb within layouts/application (14.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.8ms)
  Rendered layouts/_messages.html.erb (0.7ms)
Completed 200 OK in 616ms (Views: 614.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:45:13 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 16ms (Views: 2.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$l1qQNZe0VYe2uHayz3L8SeUQRLO5DIpqNMNg.2hcDFM6UJWB3EC1q"], ["created_at", "2016-06-08 02:45:13.610209"], ["updated_at", "2016-06-08 02:45:13.610209"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:45:13 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (2.5ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$PAUS68s5r672w9o63Yxbr.2bbtXtdGlgXti5veDw5nJYCRBWO2OMW"], ["created_at", "2016-06-08 02:45:13.637482"], ["updated_at", "2016-06-08 02:45:13.637482"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$.3pMQALWbb1lK5l2vM6OueCHaMNzcKz2bveM34xz9nm3YF98BwY6K"], ["created_at", "2016-06-08 02:45:13.650606"], ["updated_at", "2016-06-08 02:45:13.650606"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:45:13 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.5ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoryTest: test_subcategory_should_no_be_created_if_parent_id_not_exist
--------------------------------------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'basketball' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$.qWRaGAujZSd9FGwx1/Ete20HGWcI9wa01oX8xs10S/9K/rXnHuCq"], ["admin", "t"], ["created_at", "2016-06-08 02:45:13.755175"], ["updated_at", "2016-06-08 02:45:13.755175"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:45:13 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:45:13 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.7ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (45.9ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 57ms (Views: 54.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:45:13 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (1.2ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (6.0ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 28ms (Views: 11.1ms | ActiveRecord: 1.0ms)
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:45:13 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (0.9ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (4.8ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 15ms (Views: 9.3ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$XkmAhZ0adqsMe.H5qQEYres569tNqje93rs4VQgpZl7vQuAgLaeke"], ["admin", "t"], ["created_at", "2016-06-08 02:45:13.915867"], ["updated_at", "2016-06-08 02:45:13.915867"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:45:13 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:45:13 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.7ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:45:13 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (1.2ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (5.5ms)
  [1m[35mCategory Load (4.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (6.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 21ms (Views: 11.1ms | ActiveRecord: 4.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$NqENOljukJpDKRlakKOWjeWuZi3XZn7km7j01WhhgwZl0hQPsO7cK"], ["admin", "t"], ["created_at", "2016-06-08 02:45:13.990656"], ["updated_at", "2016-06-08 02:45:13.990656"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:45:14 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:45:14 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (19.6ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 29ms (Views: 26.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:45:14 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (3.8ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (8.8ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 25ms (Views: 16.7ms | ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$0b6zXPQ6GY5aE43XDqR/PeOv2b2YJbvYU.0RqnbDMTushPnlKwfKa"], ["admin", "t"], ["created_at", "2016-06-08 02:45:14.109704"], ["updated_at", "2016-06-08 02:45:14.109704"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered categories/index.html.erb within layouts/application (1.0ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 10.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$1EiFE/Gn.hFfM/WvbcgN1.bA9jYA1Jkb5eNPrm2NMalGUgP/s1zvi"], ["admin", "t"], ["created_at", "2016-06-08 02:45:14.158455"], ["updated_at", "2016-06-08 02:45:14.158455"]]
  [1m[36m (1.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (5.4ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.6ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 13.8ms | ActiveRecord: 0.5ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$PxxVHtYGlyphQ1zQW1ZNR.bu1uVr3FV.09tc.9eXJfKXkmGvvILRa"], ["admin", "t"], ["created_at", "2016-06-08 02:45:14.202014"], ["updated_at", "2016-06-08 02:45:14.202014"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$GogSr7pl8PiVuDFN/HpLO.BHgvcSJSyqbtf8QaDv9wmQjYhNt.XNe"], ["admin", "t"], ["created_at", "2016-06-08 02:45:14.229154"], ["updated_at", "2016-06-08 02:45:14.229154"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$kUQP4yvWWw4PiLHJA6ArqOQ0PNrXRE8ojc4c3id0xg8PbnioSetv6"], ["admin", "t"], ["created_at", "2016-06-08 02:45:14.249238"], ["updated_at", "2016-06-08 02:45:14.249238"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:46:39.645784"], ["updated_at", "2016-06-08 02:46:39.645784"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoryTest: test_subcategory_should_no_be_created_if_parent_id_not_exist
--------------------------------------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'basketball' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$EIEISn/74f8VjkYV/BazJO6mnOU/LZDcCx2ZlOBDA2hD9F53Q1tja"], ["admin", "t"], ["created_at", "2016-06-08 02:46:39.694460"], ["updated_at", "2016-06-08 02:46:39.694460"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:46:39 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 37ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.7ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (69.4ms)
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (4.0ms)
  Rendered layouts/_messages.html.erb (1.4ms)
Completed 200 OK in 476ms (Views: 472.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:46:40.519574"], ["updated_at", "2016-06-08 02:46:40.519574"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 11ms (ActiveRecord: 0.9ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (33.2ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.8ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 43ms (Views: 40.8ms | ActiveRecord: 0.6ms)
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:46:40.575109"], ["updated_at", "2016-06-08 02:46:40.575109"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (5.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 9.5ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$LmnoLQqlby3SKxyJDZTj/.MvpxVnm/hmmHuyMBpDYReLv3jGOsbzu"], ["admin", "t"], ["created_at", "2016-06-08 02:46:40.603399"], ["updated_at", "2016-06-08 02:46:40.603399"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.1ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (3.0ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (7.2ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 21ms (Views: 13.5ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$sqixnpulZGqaTbG0WQOmCeDwIJDBAK60T44I/JBT7Tioz1XHgzyS2"], ["admin", "t"], ["created_at", "2016-06-08 02:46:40.666155"], ["updated_at", "2016-06-08 02:46:40.666155"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (7.6ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (18.2ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 34ms (Views: 31.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:46:40.737893"], ["updated_at", "2016-06-08 02:46:40.737893"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 8ms (ActiveRecord: 0.9ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (3.1ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (4.5ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 14ms (Views: 12.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 21ms (Views: 2.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:46:40.841806"], ["updated_at", "2016-06-08 02:46:40.841806"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:46:40.862430"], ["updated_at", "2016-06-08 02:46:40.862430"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:46:40.866911"], ["updated_at", "2016-06-08 02:46:40.866911"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:46:40 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$RAfoaBBvZwXP4MpLm2D0YeGpFKze5VUB2bgZ5ze27muUxiANt592e"], ["admin", "t"], ["created_at", "2016-06-08 02:46:40.892031"], ["updated_at", "2016-06-08 02:46:40.892031"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:46:40.896556"], ["updated_at", "2016-06-08 02:46:40.896556"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:46:40.900491"], ["updated_at", "2016-06-08 02:46:40.900491"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (2.2ms)
  [1m[35mCategory Load (0.4ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.7ms)
Completed 200 OK in 12ms (Views: 8.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$aH68m.KZtVcHwvDRxVnIce4VYCNmjHlGtc6oC7yhkYE8r58ngbx7G"], ["admin", "t"], ["created_at", "2016-06-08 02:46:40.934771"], ["updated_at", "2016-06-08 02:46:40.934771"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:46:40.939032"], ["updated_at", "2016-06-08 02:46:40.939032"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:46:40.944154"], ["updated_at", "2016-06-08 02:46:40.944154"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (0.6ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$2bI9RvGEvnwhDpJh58N8ZeUUm4E8LOOJy31mKNL8b83hYTZYfwmmO"], ["admin", "t"], ["created_at", "2016-06-08 02:46:40.961902"], ["updated_at", "2016-06-08 02:46:40.961902"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:46:40.965222"], ["updated_at", "2016-06-08 02:46:40.965222"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:46:40.968402"], ["updated_at", "2016-06-08 02:46:40.968402"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (3.4ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 7.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$/igEpKf7oCoRwdwI39/AXeuXuFej3rRpnlVXX292FSeiXbM6VdACK"], ["admin", "t"], ["created_at", "2016-06-08 02:46:40.989013"], ["updated_at", "2016-06-08 02:46:40.989013"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:46:40.994671"], ["updated_at", "2016-06-08 02:46:40.994671"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:46:40.999454"], ["updated_at", "2016-06-08 02:46:40.999454"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (2.8ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$NDIJtQQC5xTdFuLwJoNUfuqzL8nb87pv7U8ZWjW5ItAg0ESvChOb6"], ["admin", "t"], ["created_at", "2016-06-08 02:46:41.022656"], ["updated_at", "2016-06-08 02:46:41.022656"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:46:41.027363"], ["updated_at", "2016-06-08 02:46:41.027363"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:46:41.030684"], ["updated_at", "2016-06-08 02:46:41.030684"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$UzgX3XPFKU3B/E6ODLFCf.YMa/IhM8g7hkSCFzy3K2stu6WMHLcm."], ["created_at", "2016-06-08 02:46:41.043607"], ["updated_at", "2016-06-08 02:46:41.043607"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:46:41 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:46:41 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$iZybn7l6GDF9dQvsUaT2MeYE8rKnqyazoiYJSxLAYIi7.8XP8UDlu"], ["created_at", "2016-06-08 02:46:41.097409"], ["updated_at", "2016-06-08 02:46:41.097409"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$6tCs1LIQf/Z2Ro3EB8BWy.uq.MWMKjhn3E2ECCvpSxzwMyUoEJ1Ty"], ["created_at", "2016-06-08 02:46:41.103885"], ["updated_at", "2016-06-08 02:46:41.103885"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:46:41 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:47:17 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.4ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 44ms (Views: 2.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:47:17.209558"], ["updated_at", "2016-06-08 02:47:17.209558"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:47:17 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 21ms (Views: 1.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:47:17.257291"], ["updated_at", "2016-06-08 02:47:17.257291"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:47:17.261497"], ["updated_at", "2016-06-08 02:47:17.261497"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:47:17 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.4ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 4ms (Views: 2.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-08 02:47:17.339554"], ["updated_at", "2016-06-08 02:47:17.339554"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-08 02:47:17.346272"], ["updated_at", "2016-06-08 02:47:17.346272"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:47:17 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (75.6ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (6.4ms)
  Rendered layouts/_messages.html.erb (1.4ms)
Completed 200 OK in 579ms (Views: 576.6ms | ActiveRecord: 0.7ms)
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.5ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:47:17.967221"], ["updated_at", "2016-06-08 02:47:17.967221"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoryTest: test_subcategory_should_no_be_created_if_parent_id_not_exist
--------------------------------------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'basketball' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$W6IvagrcuR7KxNGCAAd8mOT49WhyFWxPG.qlaIi7Ix7hQoqly1nui"], ["admin", "t"], ["created_at", "2016-06-08 02:47:18.048712"], ["updated_at", "2016-06-08 02:47:18.048712"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.4ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (1.3ms)
  [1m[35mCategory Load (1.6ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (68.6ms)
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (4.2ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 85ms (Views: 80.2ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:47:18.199196"], ["updated_at", "2016-06-08 02:47:18.199196"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 14ms (ActiveRecord: 1.0ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (1.9ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (9.7ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (4.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 25ms (Views: 21.5ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$ofud/MafeALiK7Lzlz4QMe8Pob/DDHAvdqfcKPBuK3Fll73jDpYWu"], ["admin", "t"], ["created_at", "2016-06-08 02:47:18.254389"], ["updated_at", "2016-06-08 02:47:18.254389"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (6.8ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 18ms (Views: 14.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.9ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:47:18.323646"], ["updated_at", "2016-06-08 02:47:18.323646"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 9ms (ActiveRecord: 1.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (3.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (7.0ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 17ms (Views: 14.7ms | ActiveRecord: 0.6ms)
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (2.0ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (8.3ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.7ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 27ms (Views: 17.6ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$On82TIXZl6TzehwFh.Mw5Om.NsTvrbIMfo4DRQLsgZY9iqn.3thcy"], ["admin", "t"], ["created_at", "2016-06-08 02:47:18.403065"], ["updated_at", "2016-06-08 02:47:18.403065"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (6.8ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.5ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 14ms (Views: 11.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (1.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (3.9ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (9.3ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 30ms (Views: 18.1ms | ActiveRecord: 2.1ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$j3r63NDvSVGaWxnbjANmi.ypLKAoBX9NxSdGfleXjrvXL1hhWv54G"], ["admin", "t"], ["created_at", "2016-06-08 02:47:18.496468"], ["updated_at", "2016-06-08 02:47:18.496468"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:47:18.502133"], ["updated_at", "2016-06-08 02:47:18.502133"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (2.5ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$RjuqCrLnvQ5yVucxPaiHXOG7h8NsAIY8TGHvDCVuKPM/GQE37qeiG"], ["admin", "t"], ["created_at", "2016-06-08 02:47:18.537954"], ["updated_at", "2016-06-08 02:47:18.537954"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:47:18.543353"], ["updated_at", "2016-06-08 02:47:18.543353"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$rrLTI8F6PfHcaAUQdnkOf.PnKkFZUQTR4e0agq.TpxbbPJIRj3h5y"], ["admin", "t"], ["created_at", "2016-06-08 02:47:18.566572"], ["updated_at", "2016-06-08 02:47:18.566572"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:47:18.571784"], ["updated_at", "2016-06-08 02:47:18.571784"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (4.5ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 9.8ms | ActiveRecord: 0.5ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$q6JaTK4x.huR6u6vxyl21e8c8s8U8T/v8xj8qxyy8NZLV76yA/09K"], ["admin", "t"], ["created_at", "2016-06-08 02:47:18.600424"], ["updated_at", "2016-06-08 02:47:18.600424"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:47:18.605311"], ["updated_at", "2016-06-08 02:47:18.605311"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mCategory Load (0.2ms)[0m  SELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (0.7ms)
  [1m[35mCategory Load (0.4ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$0fKfX4V8UH.vkRYpvKqijOHFJDd/x67YTiLvAV1xeSevExNfiQb8W"], ["admin", "t"], ["created_at", "2016-06-08 02:47:18.633972"], ["updated_at", "2016-06-08 02:47:18.633972"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:47:18.640087"], ["updated_at", "2016-06-08 02:47:18.640087"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$dNDmLkuJwbbqKtOZHjouZ.n0d390g1vONi5Xi8e5/9UyRU6xZX0dq"], ["created_at", "2016-06-08 02:47:18.670709"], ["updated_at", "2016-06-08 02:47:18.670709"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 1.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$uiJ0QZ4khGSOO0auCRjXwutJ3Ov9jZcBOT85LI8QMxdAbQxkjKsP6"], ["created_at", "2016-06-08 02:47:18.732659"], ["updated_at", "2016-06-08 02:47:18.732659"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$QA0yUbSZ/iDK3jsnxFLI8eMBPnNgzNGRLY2qRY3yg9vPqHHaFe9ci"], ["created_at", "2016-06-08 02:47:18.742799"], ["updated_at", "2016-06-08 02:47:18.742799"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:47:18 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.3ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:53:39.760909"], ["updated_at", "2016-06-08 02:53:39.760909"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:53:39.772824"], ["updated_at", "2016-06-08 02:53:39.772824"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:53:39 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.5ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 41ms (Views: 2.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:53:40 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.4ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:53:40.110491"], ["updated_at", "2016-06-08 02:53:40.110491"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:53:40 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.3ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 0.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$10X/mHz79x4T463hKZMdnuzwrA2ALau6mfU39Xv9imm51f2Ka7inO"], ["admin", "t"], ["created_at", "2016-06-08 02:53:40.230818"], ["updated_at", "2016-06-08 02:53:40.230818"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$591pB0mcYKD8zjn46Mi.jeaOkLN7IhzW2Rd1rQmE9IFKj9WYhJCge"], ["admin", "t"], ["created_at", "2016-06-08 02:53:40.299039"], ["updated_at", "2016-06-08 02:53:40.299039"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$PeNF9s2rW7Kl.NIMqyA2QuWa4XcKRK.hroIz6ZL3OVbccw.JxZwPq"], ["admin", "t"], ["created_at", "2016-06-08 02:53:40.314347"], ["updated_at", "2016-06-08 02:53:40.314347"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$SnLihocNwJc2JLDDh8ZI6Oler8.0mkR4604eMz0KNMH4AmJn/lpXe"], ["admin", "t"], ["created_at", "2016-06-08 02:53:40.327211"], ["updated_at", "2016-06-08 02:53:40.327211"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$aG922v9IEVvo.aOzRbjQcuslDNZ80zT9nBNBQCozj7Xq3pQPCv.pa"], ["admin", "t"], ["created_at", "2016-06-08 02:53:40.339565"], ["updated_at", "2016-06-08 02:53:40.339565"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$6x8SoHixV/l5rqGDDDFm6.6klYCZPD/yhwC8Rs0qBEq7LlfwNu0Hi"], ["admin", "t"], ["created_at", "2016-06-08 02:53:40.356186"], ["updated_at", "2016-06-08 02:53:40.356186"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:53:40 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:53:40 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (1.0ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (96.3ms)
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (5.2ms)
  Rendered layouts/_messages.html.erb (1.2ms)
Completed 200 OK in 578ms (Views: 575.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:53:40 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 18ms (ActiveRecord: 1.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$UyIZUGABZK5kEhJfWOqV3eBpgSW2sVsTOek1GeCSI0nDWg9LEiFqq"], ["admin", "t"], ["created_at", "2016-06-08 02:53:41.007981"], ["updated_at", "2016-06-08 02:53:41.007981"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:53:41 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:53:41 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (4.4ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 10.3ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:53:41 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$dcRpQyxrbcrxR0XLeJnuleU5aqs5NgXmT5Yx/GdGt/i7mkhN5Av6O"], ["admin", "t"], ["created_at", "2016-06-08 02:53:41.074060"], ["updated_at", "2016-06-08 02:53:41.074060"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:53:41 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:53:41 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.3ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (6.0ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 15ms (Views: 12.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:53:41 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoryTest: test_subcategory_should_no_be_created_if_parent_id_not_exist
--------------------------------------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'basketball' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$gaYDG9IE8KvTo5I5pAVNtO0DmkHfoPPD2i0WQXKJ8qURv6QuOXhTS"], ["created_at", "2016-06-08 02:53:41.184409"], ["updated_at", "2016-06-08 02:53:41.184409"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:53:41 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:53:41 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$.Ye6MJYH2BTLoiPnXj2fwu5JfRlBSr0j9ZSKC1xz9hii8r55ch/IO"], ["created_at", "2016-06-08 02:53:41.255326"], ["updated_at", "2016-06-08 02:53:41.255326"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$8fF7NPbq6GA3NTOdUyYFfO7AZUcmJ7NC3F7T9jEBYZiv/MWxnc6NK"], ["created_at", "2016-06-08 02:53:41.271460"], ["updated_at", "2016-06-08 02:53:41.271460"]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:53:41 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$.L6XmnvY2jd59WX1DiRDluiDwItg6FBGs/fnHz48ERg3qrURTR7m2"], ["admin", "t"], ["created_at", "2016-06-08 02:53:58.736688"], ["updated_at", "2016-06-08 02:53:58.736688"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:53:58 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 36ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:53:58 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (1.2ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (80.7ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (1.5ms)
Completed 200 OK in 468ms (Views: 434.4ms | ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:53:59.456127"], ["updated_at", "2016-06-08 02:53:59.456127"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (26.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 36ms (Views: 35.0ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$FBJkSq.JpwwtEa04lmNQbuVCIFtMczjOdpT399oopFPuv.Il5Uity"], ["admin", "t"], ["created_at", "2016-06-08 02:53:59.510448"], ["updated_at", "2016-06-08 02:53:59.510448"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.4ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:53:59.540156"], ["updated_at", "2016-06-08 02:53:59.540156"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 7ms (ActiveRecord: 1.0ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (3.1ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 8.3ms | ActiveRecord: 0.4ms)
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (0.7ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (5.8ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 21ms (Views: 13.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$r4L7h/LwHWxFkYxvTnJ0de/WiRhRb5//JoQ8MS.TVj0XluUli.gbi"], ["admin", "t"], ["created_at", "2016-06-08 02:53:59.598880"], ["updated_at", "2016-06-08 02:53:59.598880"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (6.2ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (11.7ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 24ms (Views: 21.4ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (2.4ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (6.1ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 17ms (Views: 11.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$NLuQQBl/UPRy7evYjQ8.8.1GRTAlX6YEldDK3k1tvVAdlEUwYEO5C"], ["created_at", "2016-06-08 02:53:59.679068"], ["updated_at", "2016-06-08 02:53:59.679068"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$vLyjAyXGQYVmUcLsv8D7OOVoXaIfh9NlCDnh1yxcs3hpu9qzm135K"], ["created_at", "2016-06-08 02:53:59.687143"], ["updated_at", "2016-06-08 02:53:59.687143"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$F03yzGvX1MqGQdAPd7gI4uyXgQniO1C7xMnaK6G1j7VvG3x/trT4i"], ["created_at", "2016-06-08 02:53:59.731454"], ["updated_at", "2016-06-08 02:53:59.731454"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoryTest: test_subcategory_should_no_be_created_if_parent_id_not_exist
--------------------------------------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'basketball' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:53:59.759800"], ["updated_at", "2016-06-08 02:53:59.759800"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:53:59.788969"], ["updated_at", "2016-06-08 02:53:59.788969"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:53:59.791524"], ["updated_at", "2016-06-08 02:53:59.791524"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?[0m  [["price", 20000]]
Completed 200 OK in 9ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:53:59.825549"], ["updated_at", "2016-06-08 02:53:59.825549"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises"
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$wNAM8iOIUjUu8WoK6KBknuh6mFtjxOYY.TejEl8Qz5gbc0yhjiEgK"], ["admin", "t"], ["created_at", "2016-06-08 02:53:59.850376"], ["updated_at", "2016-06-08 02:53:59.850376"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:53:59.853671"], ["updated_at", "2016-06-08 02:53:59.853671"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mCategory Load (0.1ms)[0m  SELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCategory Load (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (0.5ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$DB4iqwKFl1n2AVCEJon5T.Jkg5SxzBMK0zmiKfwWtAjh4RFxkwHmG"], ["admin", "t"], ["created_at", "2016-06-08 02:53:59.875399"], ["updated_at", "2016-06-08 02:53:59.875399"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:53:59.879409"], ["updated_at", "2016-06-08 02:53:59.879409"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (1.3ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$J9YWvYdCQ5Rr3aBf3lFBCuQ1b4FVwgABU222lz1DtuVmFXEO20WAq"], ["admin", "t"], ["created_at", "2016-06-08 02:53:59.893438"], ["updated_at", "2016-06-08 02:53:59.893438"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:53:59.896073"], ["updated_at", "2016-06-08 02:53:59.896073"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$axw2Y.tQGUTQE08TtjYRWuBLOMDUhnr1ukZ/cKO4u/v./NyRGFvZ2"], ["admin", "t"], ["created_at", "2016-06-08 02:53:59.904843"], ["updated_at", "2016-06-08 02:53:59.904843"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:53:59.907233"], ["updated_at", "2016-06-08 02:53:59.907233"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$oGS.UAg3MKlQ1BnbXylFae00Y9Nc5iLlSP49be6Lp2HmrlLoXxIr6"], ["admin", "t"], ["created_at", "2016-06-08 02:53:59.918295"], ["updated_at", "2016-06-08 02:53:59.918295"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:53:59.920765"], ["updated_at", "2016-06-08 02:53:59.920765"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (2.5ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-08 02:53:59.933507"], ["updated_at", "2016-06-08 02:53:59.933507"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-08 02:53:59.935862"], ["updated_at", "2016-06-08 02:53:59.935862"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:53:59 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (2.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by Api::UsersController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users"[0m
Completed 200 OK in 39ms (Views: 1.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$3D7Eo3R0Zfu8Dc9n81ruou3SCxDyVwfZ3WJfw3zsefSbYfZU2TwFq"], ["created_at", "2016-06-08 02:55:12.168624"], ["updated_at", "2016-06-08 02:55:12.168624"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$e5daU5aWES9jYTGR0IDtsOW85k3vE2rBTy4LPzU5Z/lndnsH32MIm"], ["created_at", "2016-06-08 02:55:12.182824"], ["updated_at", "2016-06-08 02:55:12.182824"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 15ms (Views: 2.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$.xzGbfJ0CtUWW1TnzrZcYukRqMUMIgAFJzRsqTEHOqxX3C1apWCOq"], ["created_at", "2016-06-08 02:55:12.218768"], ["updated_at", "2016-06-08 02:55:12.218768"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 7ms (Views: 1.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$SGs3qM2XQwGgojonMxMioeolwD5t/57QUpQJxAV6OlUYAAXZXYSli"], ["admin", "t"], ["created_at", "2016-06-08 02:55:12.246089"], ["updated_at", "2016-06-08 02:55:12.246089"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 16ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (1.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (80.5ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.4ms)
  Rendered layouts/_messages.html.erb (0.7ms)
Completed 200 OK in 553ms (Views: 527.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:55:12.875329"], ["updated_at", "2016-06-08 02:55:12.875329"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 12ms (ActiveRecord: 1.2ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (29.0ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 37ms (Views: 35.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$zRpuWYZ61S6NHshiAdF56e4gGHI86xKc7jbZLHAqQiOIPshwl0bUu"], ["admin", "t"], ["created_at", "2016-06-08 02:55:12.943414"], ["updated_at", "2016-06-08 02:55:12.943414"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 9ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (3.7ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:55:12.976852"], ["updated_at", "2016-06-08 02:55:12.976852"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 5ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (1.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (2.0ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.3ms)
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:55:12 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$2.xw9j6MgksXyL62DYaeYuY9/hMMhCx1MiJCpM6HYor65pCwGcnlO"], ["admin", "t"], ["created_at", "2016-06-08 02:55:13.005601"], ["updated_at", "2016-06-08 02:55:13.005601"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:55:13 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:55:13 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (3.9ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 7.9ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:55:13 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendered shared/_errors.html.erb (2.4ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (5.5ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 14ms (Views: 8.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:55:13.057381"], ["updated_at", "2016-06-08 02:55:13.057381"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoryTest: test_subcategory_should_no_be_created_if_parent_id_not_exist
--------------------------------------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'basketball' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "books"], ["created_at", "2016-06-08 02:55:13.080612"], ["updated_at", "2016-06-08 02:55:13.080612"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "programming"], ["created_at", "2016-06-08 02:55:13.084978"], ["updated_at", "2016-06-08 02:55:13.084978"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:55:13 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (2.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 8.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$FmaLS21QvLvY3FerTMuATecR/vKUD6e6aI5SxSYThNVDs/b32QKT."], ["admin", "t"], ["created_at", "2016-06-08 02:55:13.111535"], ["updated_at", "2016-06-08 02:55:13.111535"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:55:13.114488"], ["updated_at", "2016-06-08 02:55:13.114488"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$xDxOV1mNNknimynNbqv00Oq3LxGz3HyBSuvh44yx4ePf5vfDEg1xK"], ["admin", "t"], ["created_at", "2016-06-08 02:55:13.123563"], ["updated_at", "2016-06-08 02:55:13.123563"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:55:13.126588"], ["updated_at", "2016-06-08 02:55:13.126588"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Pv08.B1Bdjv7xnudOLl9auy0eA/uTXdQudx8pCr6YVrhJ.tFDdXUC"], ["admin", "t"], ["created_at", "2016-06-08 02:55:13.136032"], ["updated_at", "2016-06-08 02:55:13.136032"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:55:13.138878"], ["updated_at", "2016-06-08 02:55:13.138878"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$GZW3aAdGcuSbrv3nk925kuA53D7EDC48nK2FZQyFABVUjJzE/rRXq"], ["admin", "t"], ["created_at", "2016-06-08 02:55:13.148936"], ["updated_at", "2016-06-08 02:55:13.148936"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:55:13.151966"], ["updated_at", "2016-06-08 02:55:13.151966"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$zRcnG2HwTHo/HVrRLwPXfO6ingbYGzN0s3xdxyXisDb.WJcgRrm8u"], ["admin", "t"], ["created_at", "2016-06-08 02:55:13.161435"], ["updated_at", "2016-06-08 02:55:13.161435"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:55:13.164574"], ["updated_at", "2016-06-08 02:55:13.164574"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:55:13 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 8ms (Views: 1.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:55:13.208115"], ["updated_at", "2016-06-08 02:55:13.208115"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:55:13 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:55:13.222387"], ["updated_at", "2016-06-08 02:55:13.222387"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:55:13.224875"], ["updated_at", "2016-06-08 02:55:13.224875"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:55:13 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$R1pA8FNiYQbPepxvjLZZxeqH33eYVvs6CaF7DH3/VXDOPVYExVfhi"], ["admin", "t"], ["created_at", "2016-06-08 02:55:58.227613"], ["updated_at", "2016-06-08 02:55:58.227613"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$44cjY4.1TqgTyl18/udqvOtuJEfoGg18sxpn6fjxk94rJ0zewTr82"], ["admin", "t"], ["created_at", "2016-06-08 02:55:58.266300"], ["updated_at", "2016-06-08 02:55:58.266300"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$fmpj07dQjeIWthmVGc65reTAORKuTfyFqxCnY4XGG5a2b6WHx8l.a"], ["admin", "t"], ["created_at", "2016-06-08 02:55:58.276521"], ["updated_at", "2016-06-08 02:55:58.276521"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$uk6y.l64aKal2RTITMf0o.Itmg1/6p94LUqYtmDwB9LqFMTyEGoj2"], ["admin", "t"], ["created_at", "2016-06-08 02:55:58.285198"], ["updated_at", "2016-06-08 02:55:58.285198"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$eumNaRGIADaGUju0peA2r.I7ibvOHxmcIL1qEP0QBvyyCim/sYhKG"], ["admin", "t"], ["created_at", "2016-06-08 02:55:58.294888"], ["updated_at", "2016-06-08 02:55:58.294888"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:55:58.315849"], ["updated_at", "2016-06-08 02:55:58.315849"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 38ms (Views: 0.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:55:58.408822"], ["updated_at", "2016-06-08 02:55:58.408822"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:55:58.411336"], ["updated_at", "2016-06-08 02:55:58.411336"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$RLKnxsGRdXOh0zS4EnkA8utho8iiUyg40JLBpiyx2eqo3CK6bG1hi"], ["created_at", "2016-06-08 02:55:58.448967"], ["updated_at", "2016-06-08 02:55:58.448967"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$mpIP05bVAUCPd/mM.YiN8eDqZVkLFRa//mnk.Uyy32mff8UTDl/.i"], ["created_at", "2016-06-08 02:55:58.466090"], ["updated_at", "2016-06-08 02:55:58.466090"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$4n.4zlfPmOHnSyajEcA/ZevQ57h83mwY3y3gF.0Q8mDUo/Hmb7/Ee"], ["created_at", "2016-06-08 02:55:58.471745"], ["updated_at", "2016-06-08 02:55:58.471745"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = ?  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoryTest: test_subcategory_should_no_be_created_if_parent_id_not_exist
--------------------------------------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'basketball' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$S0iQDqbt8oOB6Wh//ZrN8uBnjt51RrE8NdeuYPRm8sYOdMIvinf0a"], ["admin", "t"], ["created_at", "2016-06-08 02:55:58.508351"], ["updated_at", "2016-06-08 02:55:58.508351"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.8ms)
  [1m[36mCategory Load (0.4ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (68.4ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (5.6ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 391ms (Views: 389.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Cm/LFOKUb.CiZwrDgJeyB.E78lvblf83nSuxFijrSxZ3GZRlhbYXu"], ["admin", "t"], ["created_at", "2016-06-08 02:55:58.944155"], ["updated_at", "2016-06-08 02:55:58.944155"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.2ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$5OFpMsgBFPKpxRT.wm1qoemtDZUnBRczYucMC8zJDvfIY35OWuvvS"], ["admin", "t"], ["created_at", "2016-06-08 02:55:58.977348"], ["updated_at", "2016-06-08 02:55:58.977348"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (3.2ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.3ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:55:58 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 33ms (Views: 1.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:56:26.139272"], ["updated_at", "2016-06-08 02:56:26.139272"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mMerchandise Load (0.2ms)[0m  [1mSELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 1.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:56:26.175768"], ["updated_at", "2016-06-08 02:56:26.175768"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:56:26.178409"], ["updated_at", "2016-06-08 02:56:26.178409"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$fAi.hGbhW4qF.rKe8IGExOy0sSsp2T/nmRVbp1p/lxhYk5D43ArOm"], ["admin", "t"], ["created_at", "2016-06-08 02:56:26.299448"], ["updated_at", "2016-06-08 02:56:26.299448"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$..8z1fljjU084lddBBd0D.RAwPcmZSFr005WF8.ZM1kCT.TQ2uom6"], ["admin", "t"], ["created_at", "2016-06-08 02:56:26.307974"], ["updated_at", "2016-06-08 02:56:26.307974"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$ILT2I3G/Fbm9ZQI9wKB.5OQXN14i.YGKRh.DYlqbGMoJmpnek0qCm"], ["admin", "t"], ["created_at", "2016-06-08 02:56:26.316243"], ["updated_at", "2016-06-08 02:56:26.316243"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Q0x1sF1HJGi3K6Ne7UhR5uD7TJnPTYGIyIRayqQBJK2kSYWjcln6a"], ["admin", "t"], ["created_at", "2016-06-08 02:56:26.324435"], ["updated_at", "2016-06-08 02:56:26.324435"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$jd3cqLqNQ6o7XTxPHYbZwugSRC3S3Q/mlsBCFzbK2P6.HNnAX4VVm"], ["admin", "t"], ["created_at", "2016-06-08 02:56:26.332629"], ["updated_at", "2016-06-08 02:56:26.332629"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$l75.4QcUfW4iViL7vgWZROeyGlQDdpdM8kGmggfJf3LlAziJx6iz."], ["created_at", "2016-06-08 02:56:26.341022"], ["updated_at", "2016-06-08 02:56:26.341022"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$UTUm8VGIoYdTsKJAT.gva.tyEyAD.JXFizmn.Ni1Ag0.ZPMJCgujS"], ["created_at", "2016-06-08 02:56:26.346587"], ["updated_at", "2016-06-08 02:56:26.346587"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$6b33fVEW4bFcO8WyioACiue/dcpF4SBaQFGVHvp9gnwhL8v/C3a6m"], ["created_at", "2016-06-08 02:56:26.380378"], ["updated_at", "2016-06-08 02:56:26.380378"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoryTest: test_subcategory_should_no_be_created_if_parent_id_not_exist
--------------------------------------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'basketball' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$82M2Ku73WXaMJaFn7jc3IOqO9PNxixCmYKslQ.on4mQG2Pj./nvp2"], ["admin", "t"], ["created_at", "2016-06-08 02:56:26.415191"], ["updated_at", "2016-06-08 02:56:26.415191"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.5ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (42.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (4.1ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 387ms (Views: 385.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$w0u.zqiDY1K8nGDQg0TLA.oWZuMJOCZnj2XYjmZstCyGgC70OH6te"], ["admin", "t"], ["created_at", "2016-06-08 02:56:26.843638"], ["updated_at", "2016-06-08 02:56:26.843638"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.0ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$qbiPxgK19hneBtet4nEpMeHxUa1dIfu.uh6zxVPNwhh1B93p7SXom"], ["admin", "t"], ["created_at", "2016-06-08 02:56:26.876071"], ["updated_at", "2016-06-08 02:56:26.876071"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (2.7ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:56:26 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$UNh8m9r5XXG8pk8LTTO3Ae62GdiYHNjiAputKtn3QjLIF0zN5Up/K"], ["admin", "t"], ["created_at", "2016-06-08 02:56:58.125931"], ["updated_at", "2016-06-08 02:56:58.125931"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:56:58.162473"], ["updated_at", "2016-06-08 02:56:58.162473"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:56:58.166823"], ["updated_at", "2016-06-08 02:56:58.166823"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (9.0ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (4.2ms)
  Rendered layouts/_messages.html.erb (0.5ms)
Completed 200 OK in 537ms (Views: 474.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$OIXaqSo6Kn.wHSd3K4CBfO4X9JLxbPjxlx9zdUZvhb3zwPMlIbhPu"], ["admin", "t"], ["created_at", "2016-06-08 02:56:58.723016"], ["updated_at", "2016-06-08 02:56:58.723016"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:56:58.764521"], ["updated_at", "2016-06-08 02:56:58.764521"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:56:58.767254"], ["updated_at", "2016-06-08 02:56:58.767254"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$QbO9YKLU4dilqW5Z9HggleValye4JdHuLgZWb41ugnouh.bkXuthq"], ["admin", "t"], ["created_at", "2016-06-08 02:56:58.783293"], ["updated_at", "2016-06-08 02:56:58.783293"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:56:58.788559"], ["updated_at", "2016-06-08 02:56:58.788559"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:56:58.792523"], ["updated_at", "2016-06-08 02:56:58.792523"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (2.8ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$hWpf8XIWv15dagcUkZjtvu587orV0.Smq6/KmPeKrf.GZeJyBdY7O"], ["admin", "t"], ["created_at", "2016-06-08 02:56:58.812548"], ["updated_at", "2016-06-08 02:56:58.812548"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-08 02:56:58.817354"], ["updated_at", "2016-06-08 02:56:58.817354"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:56:58.821521"], ["updated_at", "2016-06-08 02:56:58.821521"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.8ms)
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (48.2ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 56ms (Views: 53.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[35m (1.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$61EWnfBtCsxo7FHzVB8OdO6vIRWMQ4VKRlyF2MiaDiXToxS0Fn4xu"], ["admin", "t"], ["created_at", "2016-06-08 02:56:58.899047"], ["updated_at", "2016-06-08 02:56:58.899047"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:56:58.903803"], ["updated_at", "2016-06-08 02:56:58.903803"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:56:58.909480"], ["updated_at", "2016-06-08 02:56:58.909480"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mCategory Load (0.1ms)[0m  SELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (1.9ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$wt9CGpgaYw6L0C8c8MNh8OikfzTaZgWJbxUwfxNgCqcJLZ6GAKDVS"], ["admin", "t"], ["created_at", "2016-06-08 02:56:58.929395"], ["updated_at", "2016-06-08 02:56:58.929395"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:56:58 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 26ms (ActiveRecord: 0.6ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.4ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (11.4ms)
  [1m[36mCategory Load (0.4ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 23ms (Views: 20.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (3.2ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (7.7ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (3.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 14.6ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$2g3utGvqNhjsoTkb6ZhDF.V99mOr6oNzbLC1erBA.UMQwCSUV.Ley"], ["admin", "t"], ["created_at", "2016-06-08 02:56:59.078292"], ["updated_at", "2016-06-08 02:56:59.078292"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (5.1ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (4.1ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 12.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:56:59.123706"], ["updated_at", "2016-06-08 02:56:59.123706"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (3.3ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.8ms)
Completed 200 OK in 12ms (Views: 9.8ms | ActiveRecord: 0.5ms)
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-08 02:56:59.159380"], ["updated_at", "2016-06-08 02:56:59.159380"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 10ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (3.1ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (4.3ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 27ms (Views: 10.7ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$ZGaolN0kEJmjcFYtk1.5Q.s8wqJMbDX5WRYDcy1GJHLVjRgPZoomC"], ["admin", "t"], ["created_at", "2016-06-08 02:56:59.212130"], ["updated_at", "2016-06-08 02:56:59.212130"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (5.6ms)
  [1m[36mCategory Load (0.5ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.2ms)
  Rendered layouts/_messages.html.erb (1.1ms)
Completed 200 OK in 17ms (Views: 13.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:56:59.260219"], ["updated_at", "2016-06-08 02:56:59.260219"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (3.0ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.6ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 10.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$WathFKOcDBmoQJaCecBtku2JiaLfJxW2W5XzPVY8j9mpqF1Opn.TS"], ["created_at", "2016-06-08 02:56:59.295529"], ["updated_at", "2016-06-08 02:56:59.295529"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by Api::UsersController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654321') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$3E4AxRJg9AFiE3vOfjknEO4Uf0Ka7Ys1JcDNDZOcMI0o5eNLQiGm6"], ["created_at", "2016-06-08 02:56:59.354801"], ["updated_at", "2016-06-08 02:56:59.354801"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."mobile") = LOWER('0987654123') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$Z1d1T0JWTzBozrsSfyVlFOxEf3WPh6qnG8D72RFXUrbuDiGxpeWtC"], ["created_at", "2016-06-08 02:56:59.363397"], ["updated_at", "2016-06-08 02:56:59.363397"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = ?[0m  [["username", "john"]]
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-08 02:56:59.391555"], ["updated_at", "2016-06-08 02:56:59.391555"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
CategoryTest: test_subcategory_should_no_be_created_if_parent_id_not_exist
--------------------------------------------------------------------------
  [1m[35mCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'basketball' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:56:59.434931"], ["updated_at", "2016-06-08 02:56:59.434931"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT  "merchandises".* FROM "merchandises" WHERE "merchandises"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by Api::MerchandisesController#index as HTML
  [1m[36mMerchandise Load (0.3ms)[0m  [1mSELECT "merchandises".* FROM "merchandises"[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:56:59.477380"], ["updated_at", "2016-06-08 02:56:59.477380"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-08 02:56:59.481679"], ["updated_at", "2016-06-08 02:56:59.481679"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
  [1m[35mMerchandise Load (0.2ms)[0m  SELECT "merchandises".* FROM "merchandises" WHERE "merchandises"."price" = ?  [["price", 20000]]
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.5ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "books"], ["created_at", "2016-06-08 02:56:59.496102"], ["updated_at", "2016-06-08 02:56:59.496102"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "programming"], ["created_at", "2016-06-08 02:56:59.507722"], ["updated_at", "2016-06-08 02:56:59.507722"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/categories" for 127.0.0.1 at 2016-06-08 02:56:59 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.9ms)
  Rendered layouts/_messages.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.5ms | ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (20.9ms)[0m  [1mCREATE TABLE "categories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime, "updated_at" datetime, "parent_id" integer) [0m
  [1m[35m (14.1ms)[0m  CREATE TABLE "merchandises" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" text, "price" integer, "amount" integer, "created_at" datetime, "updated_at" datetime, "user_id" integer, "category_id" integer) 
  [1m[36m (13.2ms)[0m  [1mCREATE TABLE "subcategories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "category_id" integer) [0m
  [1m[35m (14.1ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "username" varchar, "email" varchar, "mobile" varchar, "created_at" datetime, "updated_at" datetime, "password_digest" varchar, "admin" boolean DEFAULT 'f', "avatar_file_name" varchar, "avatar_content_type" varchar, "avatar_file_size" integer, "avatar_updated_at" datetime) 
  [1m[36m (14.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.2ms)[0m  select sqlite_version(*)
  [1m[36m (13.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (7.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160612004313')[0m
  [1m[35m (7.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160601133413')
  [1m[36m (9.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160601135919')[0m
  [1m[35m (9.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160607133104')
  [1m[36m (8.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160528025621')[0m
  [1m[35m (12.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160601134917')
  [1m[36m (8.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160602023244')[0m
  [1m[35m (11.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20160606122427')
  [1m[36m (10.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20160608145526')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingCategoriesTest: test_should_show_categories_listing
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'books' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "books"], ["created_at", "2016-06-12 01:14:55.303275"], ["updated_at", "2016-06-12 01:14:55.303275"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'programming' LIMIT 1[0m
  [1m[35mSQL (30.2ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "programming"], ["created_at", "2016-06-12 01:14:55.309342"], ["updated_at", "2016-06-12 01:14:55.309342"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/categories" for 127.0.0.1 at 2016-06-12 01:14:55 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.3ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  [1m[35mCategory Load (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (52.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (7.7ms)
  Rendered layouts/_messages.html.erb (2.3ms)
Completed 200 OK in 438ms (Views: 404.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandises_filtered_by_price
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-12 01:14:56.114392"], ["updated_at", "2016-06-12 01:14:56.114392"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["title", "coffeebean"], ["description", "500g/pack, blue mountain"], ["price", 680], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-12 01:14:56.117102"], ["updated_at", "2016-06-12 01:14:56.117102"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/merchandises?price=20000" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by Api::MerchandisesController#index as HTML
  Parameters: {"price"=>"20000"}
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (3.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------
ListingMerchandisesApiTest: test_return_list_of_all_merchandises
----------------------------------------------------------------
Started GET "/api/merchandises" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by Api::MerchandisesController#index as HTML
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
ListingMerchandisesApiTest: test_returns_merchandise_by_id
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchandises" ("title", "description", "price", "amount", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["title", "iPhone6s"], ["description", "silver, 64g"], ["price", 20000], ["amount", 1], ["user_id", 1], ["created_at", "2016-06-12 01:14:56.169745"], ["updated_at", "2016-06-12 01:14:56.169745"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/api/merchandises/1" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by Api::MerchandisesController#show as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
CategoryTest: test_name_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-12 01:14:56.179113"], ["updated_at", "2016-06-12 01:14:56.179113"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
CategoryTest: test_category_should_be_valid
-------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
CategoryTest: test_subcategory_should_be_valid
----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
CategoryTest: test_name_should_be_present
-----------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
CategoryTest: test_name_should_not_be_too_short
-----------------------------------------------
  [1m[36mCategory Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aa' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
CategoryTest: test_name_should_not_be_too_long
----------------------------------------------
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'aaaaaaaaaaaaaaaaaaaaaaaaaa' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ListingUsersApiTest: test_returns_user_by_id
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$eaV/qWW4D9kNSZKHeDSey.oSRMkmSyic0UZE/6jKyVWJ/XKcGzwUK"], ["created_at", "2016-06-12 01:14:56.238470"], ["updated_at", "2016-06-12 01:14:56.238470"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users/1" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by Api::UsersController#show as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
ListingUsersApiTest: test_return_list_of_all_users
--------------------------------------------------
Started GET "/api/users" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by Api::UsersController#index as HTML
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
ListingUsersApiTest: test_returns_users_filtered_by_username
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$Ad9YeZ.S.879pEC3wUVXc.BhxM7In7laOIHMB70q6F8gd621fhJq6"], ["created_at", "2016-06-12 01:14:56.266702"], ["updated_at", "2016-06-12 01:14:56.266702"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('mary') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('mary@example.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "mary"], ["email", "mary@example.com"], ["mobile", "0987654123"], ["password_digest", "$2a$04$G8YjIg3Dj/F0UKQ5MnWqf.5Hp6gFZwP3dH74qFTIpWGD70PqutIkC"], ["created_at", "2016-06-12 01:14:56.276651"], ["updated_at", "2016-06-12 01:14:56.276651"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/users?username=john" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by Api::UsersController#index as HTML
  Parameters: {"username"=>"john"}
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
CategoriesControllerTest: test_should_get_categories_index
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$r2t4D5QfDDifeEgqeCZ.6ehsZxFKeMEwSX1VDL0tJQ9zMIrvueF1a"], ["admin", "t"], ["created_at", "2016-06-12 01:14:56.289409"], ["updated_at", "2016-06-12 01:14:56.289409"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.2ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-12 01:14:56.292541"], ["updated_at", "2016-06-12 01:14:56.292541"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-12 01:14:56.295401"], ["updated_at", "2016-06-12 01:14:56.295401"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (1.9ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_category
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$gakkwdSBpENXahpoWNZN5.YE82wq62umpZtO5CNLfV8JXT/Kq2yeq"], ["admin", "t"], ["created_at", "2016-06-12 01:14:56.317021"], ["updated_at", "2016-06-12 01:14:56.317021"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-12 01:14:56.322341"], ["updated_at", "2016-06-12 01:14:56.322341"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.4ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-12 01:14:56.326271"], ["updated_at", "2016-06-12 01:14:56.326271"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (1.8ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
CategoriesControllerTest: test_should_get_show_for_subcategory
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$wHHZ7W5VPgwEV2IVZlsnnuZJ2T4mDRTGG0s.T/2RPg/v.1ddPng22"], ["admin", "t"], ["created_at", "2016-06-12 01:14:56.344740"], ["updated_at", "2016-06-12 01:14:56.344740"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-12 01:14:56.347672"], ["updated_at", "2016-06-12 01:14:56.347672"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-12 01:14:56.350110"], ["updated_at", "2016-06-12 01:14:56.350110"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mCategory Load (0.1ms)[0m  SELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 2]]
  Rendered categories/index.html.erb within layouts/application (0.5ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
CategoriesControllerTest: test_should_redirect_create_when_admin_not_login
--------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$XewMb2/bycH22Lw6Cbv5jepeK0vRPWkP.aw01QauNXeKzkxvc2SZK"], ["admin", "t"], ["created_at", "2016-06-12 01:14:56.363593"], ["updated_at", "2016-06-12 01:14:56.363593"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-12 01:14:56.366846"], ["updated_at", "2016-06-12 01:14:56.366846"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-12 01:14:56.369384"], ["updated_at", "2016-06-12 01:14:56.369384"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
Redirected to http://test.host/categories
Filter chain halted as :require_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
CategoriesControllerTest: test_should_get_new
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$w3CxforvSTjyUTO0Ojfy3eA7VtBFaSvyeRLE26YkhlcbsvAyCUibu"], ["admin", "t"], ["created_at", "2016-06-12 01:14:56.379996"], ["updated_at", "2016-06-12 01:14:56.379996"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-12 01:14:56.382902"], ["updated_at", "2016-06-12 01:14:56.382902"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-12 01:14:56.385412"], ["updated_at", "2016-06-12 01:14:56.385412"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.6ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (60.7ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (3.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 70ms (Views: 68.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_subcategory
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$6Jt/87wuNw3fhzy6Wf95M.j1iqNy12jRWBR5amKqWr47xPtyWB.hK"], ["admin", "t"], ["created_at", "2016-06-12 01:14:56.465647"], ["updated_at", "2016-06-12 01:14:56.465647"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/login" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.3ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by CategoriesController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (6.9ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 14ms (Views: 11.5ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
Started POST "/categories" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCategory Exists (0.1ms)[0m  SELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "sports"], ["created_at", "2016-06-12 01:14:56.518190"], ["updated_at", "2016-06-12 01:14:56.518190"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/categories
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by CategoriesController#index as HTML
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (1.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.3ms)
Started POST "/categories" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"golf", "parent_id"=>"1"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'golf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "categories" ("name", "parent_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "golf"], ["parent_id", 1], ["created_at", "2016-06-12 01:14:56.532481"], ["updated_at", "2016-06-12 01:14:56.532481"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (1.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
CreateCategoriesTest: test_Get_new_category_form_and_create_category
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$r4GxEJj.vWbZ4wcntCgKlu.9IDGvMd1GakDMZEx5LXCOjqxbVtZwS"], ["admin", "t"], ["created_at", "2016-06-12 01:14:56.551180"], ["updated_at", "2016-06-12 01:14:56.551180"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.1ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (3.6ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.6ms)
  Rendered layouts/_messages.html.erb (0.3ms)
Completed 200 OK in 37ms (Views: 7.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>"sports"}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = 'sports' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "categories" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "sports"], ["created_at", "2016-06-12 01:14:56.608089"], ["updated_at", "2016-06-12 01:14:56.608089"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/categories
Completed 302 Found in 5ms (ActiveRecord: 0.8ms)
Started GET "/categories" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by CategoriesController#index as HTML
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" = ?[0m  [["parent_id", 1]]
  Rendered categories/index.html.erb within layouts/application (1.5ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (2.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
CreateCategoriesTest: test_Invalid_category_submission_results_in_failure
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('john') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('john@example.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "mobile", "password_digest", "admin", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["username", "john"], ["email", "john@example.com"], ["mobile", "0987654321"], ["password_digest", "$2a$04$cn8RM/Vj7nz5uSIvlwahA.1Q9SSGBRnVrWZR15UtnPeVlYwDn5zJS"], ["admin", "t"], ["created_at", "2016-06-12 01:14:56.627893"], ["updated_at", "2016-06-12 01:14:56.627893"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/login" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"john@example.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "john@example.com"]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/categories/new" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by CategoriesController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered shared/_errors.html.erb (0.2ms)
  [1m[35mCategory Load (0.2ms)[0m  SELECT "categories".* FROM "categories"
  Rendered categories/new.html.erb within layouts/application (2.9ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL[0m
  Rendered layouts/_navigation.html.erb (1.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "categories"
Started POST "/categories" for 127.0.0.1 at 2016-06-12 01:14:56 +0000
Processing by CategoriesController#create as HTML
  Parameters: {"category"=>{"name"=>" "}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCategory Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "categories" WHERE "categories"."name" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered shared/_errors.html.erb (1.8ms)
  [1m[36mCategory Load (0.1ms)[0m  [1mSELECT "categories".* FROM "categories"[0m
  Rendered categories/new.html.erb within layouts/application (4.1ms)
  [1m[35mCategory Load (0.1ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."parent_id" IS NULL
  Rendered layouts/_navigation.html.erb (1.2ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 7.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "categories"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
